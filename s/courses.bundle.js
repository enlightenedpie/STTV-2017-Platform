/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./single-courses.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./single-courses.js":
/*!***************************!*\
  !*** ./single-courses.js ***!
  \***************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("\n\n var student = {\n\tid : '',\n\tuserName : '',\n\tfirstName : '',\n\tlastName : '',\n\talerts : {\n\t\tdismissed : function() {return localStorage.getItem('alertsDismissed')}\n\t}\n}\n\nreqKeys = ['section', 'subsec', 'video', 'question']\nreqValues = [location.pathname.split('/').filter(String)]\n\nvar defaultReq = {}\n\nwhile (reqKeys.length > 0 && reqValues.length > 0){\n\tdefaultReq[reqKeys.pop()] = reqValues.pop()\n};\n\nconsole.log(defaultReq);\n\nvar courses = {\n\tversion : '',\n\thash : '',\n\tsalesPage : '',\n\tsettings : {\n\t\tautoplay : 0,\n\t\tactiveColor : $('body').css('color')\n\t},\n\tdefaultReq : defaultReq,\n\tdata : {\n\t\tactiveVid : '188703514',\n\t\tobject : null,\n\t\tobjectify : function(x){\n\t\t\tthis.object = JSON.parse(x);\n\t\t},\n\t\tget : function() {return localStorage.getItem('course_data')},\n\t\tset : function(data) {return localStorage.setItem('course_data',JSON.stringify(data));},\n\t\tupdate : {\n\t\t\tget : function() {return localStorage.getItem('__c-update')},\n\t\t\tset : function() {return localStorage.setItem('__c-update',Math.floor(Date.now()/1000));}\n\t\t},\n\t\trequest : function(cdata,method) {\n\t\t\t$.ajax({\n\t\t\t\turl: stajax.rest.url+'/course_data/'+stajax.rest.ID+'/',\n\t\t\t\tdata: cdata || null,\n\t\t\t\ttype: method || 'GET',\n\t\t\t\theaders: {'X-WP-Nonce' : stajax.rest.nonce},\n\t\t\t\tsuccess: function(r) {\n\t\t\t\t\tcourses.data.update.set();\n\t\t\t\t\tcourses.data.set(r);\n\t\t\t\t },\n\t\t\t\terror: function(x,s,e) {\n\t\t\t\t\tconsole.log(x,s,e);\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\treset : function(cb) {\n\t\t\tlocalStorage.removeItem('course_data');\n\t\t\tlocalStorage.removeItem('__c-update');\n\n\t\t\treturn typeof cb === 'function' && cb()\n\t\t}\n\t},\n\tpreloader : {\n\t\thtml : '<div class=\"course-preloader\"><div style=\"text-align:center\"><img src=\"'+stajax.contentURL+'/i/sttv-spinner.gif\" /><h3 style=\"text-transform:uppercase;font-weight:700\">Loading</h3></div></div>',\n\t\tfade : function() {\n\t\t\t$('.course-preloader').fadeToggle(500);\n\t\t}\n\t},\n\tinit : function(){\n\t\tvar ctrl = parseInt(localStorage.getItem('__c-update'));\n\t\tvar objd = courses.data.get();\n\n\t\t$(document).queue('heartbeat',()=>{\n\t\t\tconsole.log('first heartbeat')\n\t\t})\n\t\tcourses.log.access()\n\n\t\tif (student.alerts.dismissed() === null){\n\t\t\tlocalStorage.setItem('alertsDismissed',JSON.stringify([]));\n\t\t}\n\t\tif (JSON.parse(student.alerts.dismissed()).indexOf(courses.hash) === -1) {\n\t\t\tcourses.modal.init({\n\t\t\t\tdismissible : false,\n\t\t\t\tcomplete : function(){\n\t\t\t\t\tvar al = JSON.parse(student.alerts.dismissed())\n\t\t\t\t\tal.push(courses.hash)\n\t\t\t\t\tlocalStorage.setItem('alertsDismissed',JSON.stringify(al))\n\t\t\t\t\tcourses.modal.destroy()\n\t\t\t\t\tcourses.modal.init()\n\t\t\t\t}\n\t\t\t},function() {\n\t\t\t\t$(document).queue('afterload',function(){\n\t\t\t\t\t$('.modal-loading-overlay').fadeIn(250);\n\t\t\t\t\t$('#course_modal').modal('open');\n\t\t\t\t\tcourses.modal.alert(function(d) {\n\t\t\t\t\t\t$('#course_modal .modal-content').append(d.html);\n\t\t\t\t\t\t$('.modal-loading-overlay').fadeOut(250);\n\t\t\t\t\t});\n\t\t\t\t})\n\t\t\t})\n\t\t} else {\n\t\t\tcourses.modal.init();\n\t\t}\n\n\t\tif (objd === null || Math.floor(Date.now()/1000) > ctrl+86400) { //86400\n\t\t\tcourses.data.reset(\n\t\t\t\tcourses.data.request()\n\t\t\t);\n\t\t} else if (objd !== null && objd['version'] !== courses.version) {\n\t\t\tcourses.data.reset(window.location.reload())\n\t\t}\n\n\t\tfunction finish_init() {\n\t\t\tclearInterval(checker);\n\t\t\tcourses.data.objectify(courses.data.get());\n\n\t\t\tif (typeof courses.data.object.version === 'undefined' || courses.data.object.version !== courses.version) {\n\t\t\t\tcourses.data.reset(\n\t\t\t\t\twindow.location.reload()\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tconsole.log('Initialized!');\n\n\t\t\tcourses.setup.run();\n\t\t}\n\t\tvar checker = setInterval(function(){\n\t\t\tif (courses.data.get() == null) {\n\t\t\t\tconsole.log('localStorage not set');\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tfinish_init();\n\t\t},100);\n\n\t},\n\tsetup : {\n\t\tvalidateRequest : function(request) {\n\t\t\tif (typeof request === 'undefined') {\n\t\t\t\tvar r = courses.defaultReq;\n\t\t\t} else if (request.hasOwnProperty('type')) {\n\t\t\t\treturn request;\n\t\t\t} else {\n\t\t\t\tvar r = request;\n\t\t\t\tcourses.defaultReq = {\n\t\t\t\t\tsection : r.section,\n\t\t\t\t\tsubsec : r.subsec,\n\t\t\t\t\tvideo : r.video,\n\t\t\t\t\tquestion : r.question\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar obj = courses.data.object;\n\t\t\tvar req;\n\n\t\t\tvar q = r.question,\n\t\t\t\tv = r.video,\n\t\t\t\tb = r.subsec,\n\t\t\t\ts = r.section;\n\n\n\t\t\tif ((obj.sections[s] != null && obj.sections[s].restricted)) {\n\t\t\t\treq = {type:'restricted'}\n\t\t\t\treturn req;\n\t\t\t}\n\n\n\t\t\tif (q) {\n\t\t\t\ttry {\n\t\t\t\t\treq = {type:'video',object:obj.practice.tests[b].subsec[v].videos[q]};\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.log(e);\n\t\t\t\t}\n\t\t\t} else if (!q && v) {\n\t\t\t\ttry {\n\t\t\t\t\treq = {type:'video',object:obj.sections[s].subsec[b].videos[v]};\n\t\t\t\t} catch (e) {\n\t\t\t\t\treq = {type:'section',object:obj.practice.tests[b].subsec[v]};\n\t\t\t\t\tconsole.log(e);\n\t\t\t\t}\n\t\t\t} else if (!v && b) {\n\t\t\t\ttry {\n\t\t\t\t\treq = {type:'video',object:obj.sections[s].subsec[b]};\n\t\t\t\t} catch (e) {\n\t\t\t\t\treq = {type:'section',object:obj.practice.tests[b].subsec};\n\t\t\t\t\tconsole.log(e);\n\t\t\t\t}\n\t\t\t} else if (!b && s) {\n\t\t\t\ttry {\n\t\t\t\t\tif (s === 'practice'){\n\t\t\t\t\t\treq = {type:'practice',object:obj.practice};\n\t\t\t\t\t\t//console.log('here');\n\t\t\t\t\t} else if (typeof obj.sections[s] === 'undefined'){\n\t\t\t\t\t\treq = {type:'video',object:obj.tl_content[s]};\n\t\t\t\t\t} else {\n\t\t\t\t\t\treq = {type:'section',object:obj.sections[s]};\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.log(e);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treq = {type:'root'}\n\t\t\t}\n\t\t\t//console.log(req);\n\t\t\treturn req;\n\t\t},\n\t\tprocessRequest : function(req) {\n\t\t\tvar r = this.validateRequest(req);\n\t\t\tvar obj = courses.data.object;\n\t\t\tcourses.settings.activeColor = typeof obj.sections[courses.defaultReq.section] !== 'undefined' ? obj.sections[courses.defaultReq.section].color : 'SlateGray';\n\n\t\t\tswitch (r.type) {\n\t\t\t\tcase 'root':\n\t\t\t\t\tcourses.render.stage.changeActiveVid(obj.intro,'Intro');\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'practice':\n\t\t\t\t\tcourses.render.courseSidebar();\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'section':\n\t\t\t\t\t//console.log(r);\n\t\t\t\t\tcourses.render.stage.changeActiveVid(r.object.intro,'Intro');\n\t\t\t\t\tcourses.render.courseSidebar();\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'video':\n\t\t\t\t\tcourses.render.singleVid(r);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'restricted':\n\t\t\t\t\tvar sec = '#'+courses.defaultReq.section+' .video-text';\n\t\t\t\t\t$(sec).text(courses.data.object.sections[courses.defaultReq.section].restricted);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tcourses.error404();\n\t\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn r;\n\t\t},\n\t\tnewRequest : function(l) {\n\t\t\treturn this.processRequest(JSON.parse(l));\n\t\t},\n\t\trun : function() {\n\t\t\ttry {\n\t\t\t\tthis.processRequest();\n\t\t\t\tcourses.render.courseNav();\n\t\t\t\tcourses.render.courseSidebar();\n\t\t\t} catch (err) {\n\t\t\t\tconsole.log(err);\n\t\t\t}\n\t\t\tconsole.log('Setup complete');\n\t\t\tif (typeof student.firstName !== 'undefined') {\n\t\t\t\t$('div.user-bug > div > span').text('Hi '+student.firstName+'!')\n\t\t\t}\n\t\t\tsetTimeout(function() {courses.shutdown()},1000);\n\t\t},\n\t},\n\tshutdown : function() {\n\t\tvar hb = setInterval(()=>{\n\t\t\tif ($(document).queue('heartbeat').length >= 1){\n\t\t\t\t_st.heartBeat()\n\t\t\t}\n\t\t}\n\t\t,3000);\n\t\tthis.preloader.fade()\n\t\t$(document).dequeue('shutdown')\n\t\tconsole.log('Shutdown complete')\n\t\t$(document).dequeue('afterload')\n\t},\n\trender : {\n\t\tstage : {\n\t\t\tiframe : function() {\n\t\t\t\t$('.sttv-embed-video>iframe').replaceWith(courses.data.activeVid);\n\t\t\t},\n\t\t\tsetActiveVid : function(id,title) {\n\t\t\t\tvar html = '<iframe class=\"sttv-course-player\" src=\"https://player.vimeo.com/video/'+id+'?title=0&byline=0&portrait=0&badge=0&autopause=0&player_id=0&autoplay='+courses.settings.autoplay+'\" width=\"1920\" height=\"1080\" frameborder=\"0\" title=\"'+title+'\" webkitallowfullscreen=\"\" mozallowfullscreen=\"\" allowfullscreen=\"\"></iframe>';\n\t\t\t\tcourses.data.activeVid = html;\n\t\t\t},\n\t\t\tchangeActiveVid : function(id,title) {\n\t\t\t\tthis.setActiveVid(id,title);\n\t\t\t\tthis.iframe();\n\t\t\t}\n\t\t},\n\t\ttitle : function(txt) {\n\t\t\t$('#course-after-title h2').css(\"color\",courses.settings.activeColor).html(txt);\n\t\t},\n\t\tcontent : function() {\n\t\t\t//$('.tabs a').css(\"color\",courses.settings.activeColor);\n\t\t\t//$('.tabs .indicator').css(\"background-color\",courses.settings.activeColor);\n\t\t},\n\t\tcourseNav : function() {\n\t\t\tvar obj = courses.data.object;\n\t\t\tvar nav = $('<ul/>',{\n\t\t\t\t\"class\": \"collapsible\",\n\t\t\t\t\"data-collapsible\": \"accordion\",\n\t\t\t\tid: \"coursenav\"\n\t\t\t});\n\n\t\t\t$.each(obj.sections,function(k,v){\n\t\t\t\tvar active = (k === courses.defaultReq.section) ? ' active' : '' ;\n\t\t\t\tvar item = $('<li/>').append($('<div/>',{\n\t\t\t\t\ttext: v.name,\n\t\t\t\t\tstyle: \"color: \"+v.color,\n\t\t\t\t\t\"class\": \"section-link collapsible-header\"+active,\n\t\t\t\t\t\"data-req\" : JSON.stringify({section:k})\n\t\t\t\t})).append($('<div/>',{\n\t\t\t\t\t\"class\": \"collapsible-body\",\n\t\t\t\t\thtml: '<span>'+v.description+'</span>'\n\t\t\t\t}).append($('<div/>',{\n\t\t\t\t\t\"class\":\"collapsible-footer\"\n\t\t\t\t})));\n\n\t\t\t\t$.each(v.subsec,function(a,b){\n\t\t\t\t\tvar sub = $('<a/>',{\n\t\t\t\t\t\t\"class\":\"cfooter-subsec-link\",\n\t\t\t\t\t\ttext: b.title,\n\t\t\t\t\t\thref: \"\",\n\t\t\t\t\t\tstyle: \"color:\"+v.color\n\t\t\t\t\t}).prepend('<i class=\"material-icons\">web</i>&nbsp;')\n\t\t\t\t\t$('.collapsible-footer',item).append(sub)\n\t\t\t\t});\n\n\t\t\t\t$('.collapsible-footer',item).append(\n\t\t\t\t\t$('<a/>',{\n\t\t\t\t\t\t\"class\": \"cfooter-dl-link\",\n\t\t\t\t\t\t\"data-sec\":k,\n\t\t\t\t\t\thref: \"\",\n\t\t\t\t\t\ttext: \"downloads\",\n\t\t\t\t\t\tstyle: \"color:\"+v.color\n\t\t\t\t\t}).prepend('<i class=\"material-icons\">cloud_download</i>&nbsp;')\n\t\t\t\t)\n\n\t\t\t\titem.appendTo(nav);\n\t\t\t});\n\n\t\t\tvar prac = $('<li/>').append($('<a/>',{\n\t\t\t\ttext: 'Practice Tests',\n\t\t\t\thref: '#practice',\n\t\t\t\t\"class\": \"section-link practice-section-link collapsible-header\",\n\t\t\t\t\"data-req\" : JSON.stringify({section:'practice'})\n\t\t\t})).append($('<div/>',{\n\t\t\t\t\"class\": \"collapsible-body\",\n\t\t\t\thtml: '<span>'+obj.practice.description+'</span>'\n\t\t\t}).append($('<div/>',{\n\t\t\t\t\"class\":\"collapsible-footer\"\n\t\t\t})));\n\n\t\t\t$('.collapsible-footer',prac).append(\n\t\t\t\t$('<a/>',{\n\t\t\t\t\t\"class\": \"cfooter-dl-link\",\n\t\t\t\t\t\"data-sec\":\"practice\",\n\t\t\t\t\thref: \"\",\n\t\t\t\t\ttext: \"downloads\",\n\t\t\t\t\tstyle: \"color:gray\"\n\t\t\t\t}).prepend('<i class=\"material-icons\">cloud_download</i>&nbsp;')\n\t\t\t)\n\n\t\t\tprac.appendTo(nav);\n\n\t\t\tnav.appendTo($('#course-nav-container'));\n\n\t\t\t$(document).queue('shutdown',function(){\n\t\t\t\t$('.collapsible').collapsible();\n\t\t\t})\n\t\t},\n\t\tcourseSidebar : function() {\n\t\t\tvar wrap = $('<div/>',{\n\t\t\t\t\"class\" : \"col s12 course-right-sidebar-inner\"\n\t\t\t});\n\t\t\tvar a;\n\t\t\tvar div;\n\n\t\t\tif (!courses.defaultReq.section) {\n\t\t\t\treturn false;\n\t\t\t} else if (courses.defaultReq.section === 'practice') {\n\t\t\t\tvar sec = courses.data.object.practice.tests,\n\t\t\t\t\tsub = courses.data.object.practice.tests[courses.defaultReq.subsec];\n\n\t\t\t\t\tswitch (sub) {\n\t\t\t\t\t\tcase undefined:\n\t\t\t\t\t\t\t$.each(sec,function(k,v){\n\t\t\t\t\t\t\t\tvar d = $('<div/>',{\n\t\t\t\t\t\t\t\t\t\"class\" : \"row course-subsection-container\",\n\t\t\t\t\t\t\t\t\t\"style\" : \"background-color:white\"\n\t\t\t\t\t\t\t\t}).append('<h3><p>'+v.name+'</p></h3>');\n\n\t\t\t\t\t\t\t\tswitch (v.subsec) {\n\t\t\t\t\t\t\t\t\tcase undefined:\n\t\t\t\t\t\t\t\t\t\t$('<div/>',{\n\t\t\t\t\t\t\t\t\t\t\t\"class\":\"sidebar-sub-link row valign-wrapper\",\n\t\t\t\t\t\t\t\t\t\t\ttext: v.restricted\n\t\t\t\t\t\t\t\t\t\t}).appendTo(d);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\t$.each(v.subsec,function(key,val){\n\t\t\t\t\t\t\t\t\t\t\tvar aReq = {section:'practice',subsec:k,video:key};\n\t\t\t\t\t\t\t\t\t\t\t$('<a/>',{\n\t\t\t\t\t\t\t\t\t\t\t\t\"class\" : 'course-click',\n\t\t\t\t\t\t\t\t\t\t\t\thref : courses.data.object.link+'/practice/'+k+'/'+key,\n\t\t\t\t\t\t\t\t\t\t\t\t\"data-req\" : JSON.stringify(aReq),\n\t\t\t\t\t\t\t\t\t\t\t\ttext : val.title,\n\t\t\t\t\t\t\t\t\t\t\t\tstyle : \"display:block;padding:1em;margin-left:1em\"\n\t\t\t\t\t\t\t\t\t\t\t}).append('').appendTo(d);\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\td.appendTo(wrap);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tvar pracSec = sub.subsec[courses.defaultReq.video];\n\n\t\t\t\t\t\t\tvar h = $('<div/>',{\n\t\t\t\t\t\t\t\t\"class\" : \"row course-subsection-container\",\n\t\t\t\t\t\t\t\t\"style\" : \"background-color:white\"\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\th.append('<h3><p>'+pracSec.title+'</p></h3>');\n\n\t\t\t\t\t\t\t$.each(pracSec.videos,function(k,v){\n\t\t\t\t\t\t\t\tvar slug = v.slug,\n\t\t\t\t\t\t\t\t\ty = {section:courses.defaultReq.section,subsec:courses.defaultReq.subsec,video:courses.defaultReq.video,question:slug},\n\t\t\t\t\t\t\t\t\tdur = Math.floor(v.time / 60) + 'm '+ (v.time % 60) + 's';\n\n\t\t\t\t\t\t\t\ta = $('<a/>',{\n\t\t\t\t\t\t\t\t\t\"class\" : 'course-click',\n\t\t\t\t\t\t\t\t\thref : courses.data.object.link+'/'+y.section+'/'+y.subsec+'/'+y.video+'/'+slug,\n\t\t\t\t\t\t\t\t\t\"data-req\" : JSON.stringify(y)\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tdiv = $('<div/>',{\n\t\t\t\t\t\t\t\t\t\"class\":\"sidebar-sub-link row valign-wrapper\"\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tif (!v){\n\t\t\t\t\t\t\t\t\tdiv.text(\"No videos found in this section\");\n\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t$('<div/>',{\n\t\t\t\t\t\t\t\t\t\t\"class\":\"col s4\",\n\t\t\t\t\t\t\t\t\t\tstyle: \"padding:0px\"\n\t\t\t\t\t\t\t\t\t}).append($('<img/>',{\n\t\t\t\t\t\t\t\t\t\tsrc : v.thumb,\n\t\t\t\t\t\t\t\t\t\tstyle : \"width:100%;height:auto;display:block\"\n\t\t\t\t\t\t\t\t\t})).appendTo(div);\n\n\t\t\t\t\t\t\t\t\t$('<div/>',{\n\t\t\t\t\t\t\t\t\t\t\"class\":\"col s8\"\n\t\t\t\t\t\t\t\t\t}).append($('<span/>',{\n\t\t\t\t\t\t\t\t\t\t\"class\" : 'course-video-title',\n\t\t\t\t\t\t\t\t\t\ttext : v.name\n\t\t\t\t\t\t\t\t\t})).append($('<span/>',{\n\t\t\t\t\t\t\t\t\t\t\"class\":\"course-video-duration\",\n\t\t\t\t\t\t\t\t\t\ttext : dur\n\t\t\t\t\t\t\t\t\t})).appendTo(div);\n\n\t\t\t\t\t\t\t\t\tdiv.appendTo(a);\n\t\t\t\t\t\t\t\t\ta.appendTo(h);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\th.appendTo(wrap);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t} else {\n\n\t\t\t\t$.each(courses.data.object.sections[courses.defaultReq.section].subsec, function(key, value){\n\n\t\t\t\t\tvar h = $('<div/>',{\n\t\t\t\t\t\t\"class\" : \"row course-subsection-container\",\n\t\t\t\t\t\t\"style\" : \"background-color:white\"\n\t\t\t\t\t});\n\t\t\t\t\th.append('<h3><p>'+key+'</p></h3>');\n\t\t\t\t\tif (!value.videos){\n\t\t\t\t\t\th.append(\"<span>No videos found in this section</span>\");\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$.each(value.videos,function(k,v){\n\t\t\t\t\t\t\tvar z = {section:courses.defaultReq.section,subsec:key,video:v.slug},\n\t\t\t\t\t\t\t\tdur = Math.floor(v.time / 60) + 'm '+ (v.time % 60) + 's';\n\t\t\t\t\t\t\ta = $('<a/>',{\n\t\t\t\t\t\t\t\t\t\"class\" : 'course-click',\n\t\t\t\t\t\t\t\t\thref : courses.data.object.link+'/'+z.section+'/'+key+'/'+v.slug,\n\t\t\t\t\t\t\t\t\t\"data-req\" : JSON.stringify(z)\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tdiv = $('<div/>',{\n\t\t\t\t\t\t\t\t\"class\":\"sidebar-sub-link row valign-wrapper\"\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tif (!v){\n\t\t\t\t\t\t\t\tdiv.text(\"No videos found in this section\");\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t$('<div/>',{\n\t\t\t\t\t\t\t\t\t\"class\":\"col s4\",\n\t\t\t\t\t\t\t\t\tstyle: \"padding:0px\"\n\t\t\t\t\t\t\t\t}).append($('<img/>',{\n\t\t\t\t\t\t\t\t\tsrc : v.thumb,\n\t\t\t\t\t\t\t\t\tstyle : \"width:100%;height:auto;display:block\"\n\t\t\t\t\t\t\t\t})).appendTo(div);\n\n\t\t\t\t\t\t\t\t$('<div/>',{\n\t\t\t\t\t\t\t\t\t\"class\":\"col s8\"\n\t\t\t\t\t\t\t\t}).append($('<span/>',{\n\t\t\t\t\t\t\t\t\t\"class\" : 'course-video-title',\n\t\t\t\t\t\t\t\t\ttext : v.name\n\t\t\t\t\t\t\t\t})).append($('<span/>',{\n\t\t\t\t\t\t\t\t\t\"class\":\"course-video-duration\",\n\t\t\t\t\t\t\t\t\ttext : dur\n\t\t\t\t\t\t\t\t})).appendTo(div);\n\n\t\t\t\t\t\t\t\t/*$('<div/>',{\n\t\t\t\t\t\t\t\t\t\"class\":\"col s2 m1\"\n\t\t\t\t\t\t\t\t}).append('<div class=\"valign-wrapper\"><span>W</span></div>').appendTo(div);*/\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tdiv.appendTo(a);\n\t\t\t\t\t\t\ta.appendTo(h);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\th.appendTo(wrap);\n\t\t\t\t});\n\t\t\t}\n\t\t\t$('#courses-right-sidebar').empty().append(wrap);\n\t\t},\n\t\tsingleVid : function(req) {\n\t\t\tcourses.render.stage.changeActiveVid(req.object.ID,req.object.name);\n\t\t\tvar txt = '';\n\t\t\tvar obj = courses.data.object;\n\t\t\tif (courses.defaultReq.section === 'practice') {\n\t\t\t\ttxt = courses.defaultReq.section+' &raquo; '+obj.practice.tests[courses.defaultReq.subsec].name+' &raquo; '+obj.practice.tests[courses.defaultReq.subsec].subsec[courses.defaultReq.video].title+' &raquo; '+req.object.name;\n\t\t\t} else {\n\t\t\t\ttxt = courses.defaultReq.section+' &raquo; '+courses.defaultReq.subsec+' &raquo; '+req.object.name;\n\t\t\t}\n\t\t\tcourses.render.title(txt);\n\t\t}\n\t},\n\tpushHist : function(obj,url,cb) {\n\t\twindow.history.pushState(obj, document.title, url);\n\t\ttypeof cb === 'function' && cb();\n\t},\n\tbackHist : function(r) {\n\t\tcourses.setup.newRequest(r);\n\t},\n\terror404 : function() {\n\t\ttry {\n\t\t\tthrow new Error('Video not found. Please use the course links to navigate to your desired content.');\n\t\t} catch (e) {\n\t\t\tcourses.render.title(e);\n\t\t}\n\t},\n\tmodal : {\n\t\tinit : function(obj,cb) {\n\t\t\tvar o = (typeof obj === 'object') ? obj : {};\n\t\t\tif ($('#course_modal').length == 0) {\n\t\t\t\t$('<div/>',{id:\"course_modal\",\"class\":\"modal\"})\n\t\t\t\t\t.append($('<div/>',{\"class\":\"modal-loading-overlay\"}).html('<div style=\"text-align:center\"><img src=\"'+stajax.contentURL+'/i/sttv-spinner.gif\" /><h3 class=\"modal-message\" style=\"text-transform:uppercase;font-weight:700\"></h3></div>'))\n\t\t\t\t\t.append($('<div/>',{\"class\":\"modal-content\"}))\n\t\t\t\t\t.prependTo('body');\n\t\t\t}\n\t\t\t$('#course_modal').modal({\n\t\t\t\tdismissible : (typeof o.dismissible === 'boolean' && !o.dismissible)?false:true,\n\t\t\t\topacity : o.opacity || .5,\n\t\t\t\tinDuration : o.in || 500,\n\t\t\t\toutDuration : o.out || 500,\n\t\t\t\tready : o.ready || _st.fn,\n\t\t\t\tcomplete : o.complete || function(){\n\t\t\t\t\t$('.modal-content',this).empty();\n\t\t\t\t}\n\t\t\t});\n\t\t\ttypeof cb === 'function' && cb();\n\t\t},\n\t\tdestroy : function(cb) {\n\t\t\t$('#course_modal').remove();\n\t\t\ttypeof cb === 'function' && cb();\n\t\t},\n\t\talert : function(scb,ecb) {\n\t\t\t_st.request(\n\t\t\t\t{\n\t\t\t\t\tmethod : 'GET',\n\t\t\t\t \troute : stajax.rest.url+'/course_data/'+stajax.rest.ID+'?alert',\n\t\t\t\t\theaders : {'X-WP-Nonce' : stajax.rest.nonce},\n\t\t\t\t \tsuccess : function(e){\n\t\t\t\t\t\ttypeof scb === 'function' && scb(e);\n\t\t\t\t\t},\n\t\t\t\t\terror: function(z){\n\t\t\t\t\t\tconsole.log(z);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t},\n\tratings : {\n\t\tvalue : 5,\n\t\tcontent : 'This course is fantastic! Thx Brooke!',\n\t\trun : function() {\n\t\t\t$('.modal-loading-overlay').fadeIn(250);\n\t\t\t$('#course_modal').modal('open');\n\t\t\tcourses.ratings.verify(function(){\n\t\t\t\t$('.modal-loading-overlay').fadeOut(250)\n\t\t\t});\n\t\t},\n\t\tverify : function(cb) {\n\t\t\t_st.request(\n\t\t\t\t{\n\t\t\t\t\tmethod : 'POST',\n\t\t\t\t \troute : stajax.rest.url+'/reviews/',\n\t\t\t\t \tcdata : {'user_id':student.id,'post':courses.salesPage},\n\t\t\t\t\theaders : {'X-WP-Nonce' : stajax.rest.nonce,'Content-Type':'application/json'},\n\t\t\t\t \tsuccess : function(e){\n\t\t\t\t\t\t$('#course_modal .modal-content').append(e.templateHtml);\n\t\t\t\t\t\ttypeof cb === 'function' && cb();\n\t\t\t\t\t},\n\t\t\t\t\terror: function(z){\n\t\t\t\t\t\tconsole.log(z);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t},\n\t\tsubmit : function(cb) {\n\t\t\t$('.modal-loading-overlay').fadeToggle(250);\n\t\t\t_st.request(\n\t\t\t\t{\n\t\t\t\t\tmethod : 'PUT',\n\t\t\t\t \troute : stajax.rest.url+'/reviews/',\n\t\t\t\t \tcdata : {\n\t\t\t\t\t\t'user_id':student.id,\n\t\t\t\t\t\t'post':courses.salesPage,\n\t\t\t\t\t\t'rating':courses.ratings.value,\n\t\t\t\t\t\t'UA':'STTV REST/' + '--browser: ' + navigator.userAgent,\n\t\t\t\t\t\t'comment_content':courses.ratings.content\n\t\t\t\t\t},\n\t\t\t\t\theaders : {'X-WP-Nonce' : stajax.rest.nonce,'Content-Type':'application/json'},\n\t\t\t\t \tsuccess : function(e){\n\t\t\t\t\t\ttypeof cb === 'function' && cb(e)\n\t\t\t\t\t},\n\t\t\t\t\terror: function(z){\n\t\t\t\t\t\tconsole.log(z);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t},\n\tfeedback : {\n\t\trun : function() {\n\t\t\t$('.modal-loading-overlay').fadeIn(250);\n\t\t\t$('#course_modal').modal('open');\n\t\t\tthis.req('GET',null,function(e){\n\t\t\t\t\t$('#course_modal .modal-content').append(e.templateHtml)\n\t\t\t\t\t$('.modal-loading-overlay').fadeOut(250)\n\t\t\t\t}\n\t\t\t)\n\t\t},\n\t\treq : function(m,d,suc,err) {\n\t\t\t_st.request(\n\t\t\t\t{\n\t\t\t\t\tmethod : m,\n\t\t\t\t \troute : stajax.rest.url+'/feedback',\n\t\t\t\t\tcdata : d || {},\n\t\t\t\t\theaders : {'X-WP-Nonce' : stajax.rest.nonce,'Content-Type':'application/json'},\n\t\t\t\t \tsuccess : function(e){\n\t\t\t\t\t\ttypeof suc === 'function' && suc(e);\n\t\t\t\t\t},\n\t\t\t\t\terror: function(z){\n\t\t\t\t\t\tconsole.log(z);\n\t\t\t\t\t\ttypeof err === 'function' && err(z);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t},\n\tdownloads : {\n\t\tcontainer : '<div class=\"modal-downloads-container row\"></div>',\n\t\tget : function(s,cb){\n\t\t\tvar cont = $(this.container);\n\t\t\t$('.modal-loading-overlay').fadeIn(250);\n\t\t\t$('#course_modal').modal('open');\n\t\t\tcont.append('<h1><span>'+s+'</span> Downloads</h1>')\n\n\t\t\tvar obj = courses.data.object,\n\t\t\t\tres = (typeof obj.sections[s] === 'undefined') ? obj.practice.resources : obj.sections[s].resources;\n\n\t\t\tvar inner = $('<div/>',{\n\t\t\t\t\"class\" : \"dls-inner\"\n\t\t\t});\n\n\t\t\tif (res.length === 0) {\n\t\t\t\tinner.append($('<div/>',{\"class\":\"col s12\",text:\"No downloads found\"}))\n\t\t\t} else {\n\t\t\t\t$.each(res,function(k,v){\n\t\t\t\t\tinner.append($('<a/>',{\n\t\t\t\t\t\t\"class\" : \"dl-link col s6 m4\",\n\t\t\t\t\t\ttext : k,\n\t\t\t\t\t\thref : stajax.dlURL+\"?res=\"+k+\"&section=\"+s+\"&test=\"+obj.test+\"&checksum=\"+v\n\t\t\t\t\t}))\n\t\t\t\t})\n\t\t\t}\n\t\t\tinner.appendTo(cont)\n\t\t\tcont.appendTo($('.modal-content','#course_modal'))\n\n\t\t\ttypeof cb === 'function' && cb();\n\t\t}\n\t},\n\tlog : {\n\t\taccess : function() {\n\t\t\t_st.request({\n\t\t\t\troute : stajax.rest.url+'/course_log',\n\t\t\t\tmethod : 'POST',\n\t\t\t\theaders : {'X-WP-Nonce' : stajax.rest.nonce},\n\t\t\t\tcdata : {\n\t\t\t\t\tuser : student.userName,\n\t\t\t\t\tUA : navigator.userAgent,\n\t\t\t\t\turi : location.href\n\t\t\t\t},\n\t\t\t\tsuccess : function(d){\n\t\t\t\t\treturn this\n\t\t\t\t},\n\t\t\t\terror : function(x) {\n\t\t\t\t\tconsole.log(x)\n\t\t\t\t\treturn this\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t}\n}; //end courses object\n\nwindow.onpopstate = function(e){\n\tif (e.state == null) {window.location.reload();}\n\tcourses.backHist(JSON.stringify(e.state));\n};\n\nvar handlers = '.section-link, .course-rating, .course-feedback, .ratings-submit-button, .feedback-submit-button, .course-updater, .cfooter-dl-link, .cfooter-subsec-link, .alert-dismiss';\n\n$(document).on('click',handlers,function(e){\n\te.preventDefault();\n\tvar t = $(this);\n\tvar s = e.handleObj.selector.split(/,\\s+/);\n\tvar c = t.attr('class').split(/\\s+/);\n\n\tvar f = {\n\t\t'alert-dismiss' : function() {\n\t\t\tt.closest('#course_modal').modal('close')\n\t\t},\n\t\t'cfooter-dl-link' : function() {\n\t\t\tcourses.downloads.get(t.attr('data-sec'),function(){\n\t\t\t\t$('.modal-loading-overlay').fadeOut(250)\n\t\t\t})\n\t\t},\n\t\t'cfooter-subsec-link' : function() {\n\t\t\treturn false;\n\t\t},\n\t\t'course-rating' : function() {\n\t\t\tcourses.ratings.run()\n\t\t},\n\t\t'course-feedback' : function() {\n\t\t\tcourses.feedback.run()\n\t\t},\n\t\t'course-updater' : function() {\n\t\t\tif (confirm('Only do this if advised by a technician at SupertutorTV, as access to your course could be broken or interrupted. Are you sure you want to proceed?')){\n\t\t\t\tcourses.data.reset(window.location.reload());\n\t\t\t}\n\t\t},\n\t\t'ratings-submit-button' : function() {\n\t\t\tif (!$('#review-content').val()) {\n\t\t\t\t$('#review-content')\n\t\t\t\t\t.focus()\n\t\t\t\t\t.attr('placeholder','You must enter a review')\n\t\t\t\treturn false\n\t\t\t} else {\n\t\t\t\tcourses.ratings.content = $('#review-content').val()\n\t\t\t}\n\n\t\t\tcourses.ratings.submit(function(data){\n\t\t\t\tif (data.error){\n\t\t\t\t\t$('.modal-error').text(data.error);\n\t\t\t\t} else {\n\t\t\t\t\t$('#course_modal .modal-content').html(data.templateHtml);\n\t\t\t\t}\n\t\t\t\t$('.modal-loading-overlay').fadeToggle(250);\n\t\t\t});\n\t\t},\n\t\t'feedback-submit-button' : function() {\n\t\t\tif (t.hasClass('disabled')){return;}\n\t\t\tvar content = $('#feedback-post-form>textarea').val();\n\t\t\tif (!content){\n\t\t\t\t$('#feedback-post-form>textarea')\n\t\t\t\t\t.focus()\n\t\t\t\t\t.attr('placeholder','You must enter some feedback before you submit')\n\t\t\t\treturn false\n\t\t\t}\n\n\t\t\t$('.modal-loading-overlay').fadeToggle(250);\n\t\t\t_st.request(\n\t\t\t\t{\n\t\t\t\t\tmethod : 'POST',\n\t\t\t\t \troute : stajax.rest.url+'/feedback',\n\t\t\t\t\tcdata : {\n\t\t\t\t\t\tstudent : student.id,\n\t\t\t\t\t\tpostID : courses.data.object.id,\n\t\t\t\t\t\tcontent : content\n\t\t\t\t\t},\n\t\t\t\t\theaders : {'X-WP-Nonce' : stajax.rest.nonce,'Content-Type':'application/json'},\n\t\t\t\t \tsuccess : function(e){\n\t\t\t\t\t\t$('.modal-loading-overlay').fadeToggle(250);\n\t\t\t\t\t\tif (e) {\n\t\t\t\t\t\t\t$('#course_modal').modal('close')\n\t\t\t\t\t\t\tMaterialize.toast('Feedback sent. Thanks!', 5000)\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t$('.modal-content').empty().append($('<pre/>',{\n\t\t\t\t\t\t\t\ttext : 'Something went wrong. Please email techsupport@supertutortv.com with your issue.'\n\t\t\t\t\t\t\t}))\n\t\t\t\t\t\t\t$('.modal-loading-overlay').fadeToggle(250);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\terror: function(x){\n\t\t\t\t\t\tconsole.log('error')\n\t\t\t\t\t\t$('.modal-content').empty().append($('<pre/>',{\n\t\t\t\t\t\t\ttext : JSON.stringify(x[0]['responseJSON'])\n\t\t\t\t\t\t}))\n\t\t\t\t\t\t$('.modal-loading-overlay').fadeToggle(250);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t},\n\t\t'section-link' : function() {\n\t\t\tvar d = JSON.parse(t.attr('data-req'));\n\t\t\tvar a = courses.setup.newRequest(t.attr('data-req'));\n\t\t\tvar b = courses.data.object.link+'/'+d.section;\n\t\t\tcourses.pushHist(a,b,function(){\n\t\t\t\t$('.indicator').css('background-color',t.css('color'));\n\t\t\t});\n\t\t}\n\t}\n\tc.some(function(v){typeof f[v] !== 'undefined' && f[v]()});\n});\n\n// Reads Vimeo Player\n$(window).on('load',function(){\n\n\tvar video = document.querySelector('iframe.sttv-course-player');\n\tvar player = new Vimeo.Player(video);\n\tplayer.on('timeupdate',function(d){\n\t\tif (d.percent<0.5){\n\t\t\treturn false;\n\t\t} else {\n\t\t\tconsole.log(d)\n\t\t}\n\t});\n})\n\n$(document).on('click','.course-click',function(e) {\n\t\te.preventDefault();\n\t\tvar t = this,\n\t\t\to = $(t).attr('data-req'),\n\t\t\tg = $(t).attr('href'),\n\t\t\ta = courses.setup.newRequest(o)\n\n\t\tcourses.pushHist(a,g);\n\t\t//console.log(e.isPropagationStopped());\n\t\t$('.course-click .sidebar-sub-link').css({\"color\":\"\",\"background-color\":\"\"}).removeClass('z-depth-1 course-active');\n\t\t$('.sidebar-sub-link',this).css(\n\t\t\t{\n\t\t\t\tcolor: \"white\",\n\t\t\t\t\"background-color\": courses.settings.activeColor\n\t\t\t}\n\t\t).addClass('z-depth-1 course-active');\n\t}\n);\n\n$(document).on({\n\tclick : function(){\n\t\tvar onStar = parseInt($(this).data('value'), 10); // The star currently selected\n\t\tvar stars = $(this).parent().children('li.star');\n\t\tfor (i = 0; i < stars.length; i++) {\n\t\t  $(stars[i]).removeClass('selected');\n\t\t}\n\n\t\tfor (i = 0; i < onStar; i++) {\n\t\t  $(stars[i]).addClass('selected');\n\t\t}\n\n\t\tcourses.ratings.value = onStar;\n\t},\n\tmouseover: function(){\n\t\tvar onStar = parseInt($(this).data('value'), 10); // The star currently mouse on\n\n\t\t// Now highlight all the stars that's not after the current hovered star\n\t\t$(this).parent().children('li.star').each(function(e){\n\t\t  if (e < onStar) {\n\t\t\t$(this).addClass('hover');\n\t\t  }\n\t\t  else {\n\t\t\t$(this).removeClass('hover');\n\t\t  }\n\t\t});\n\t},\n\tmouseout: function(){\n\t\t$(this).parent().children('li.star').each(function(e){\n\t\t  $(this).removeClass('hover');\n\t\t});\n\t}\n},'#stars li');\n\n$(document).ready(function(){\n\tcourses.init();\n\t$('.sttv-vid-clicker').click(function(e){\n\t\te.preventDefault();\n\t\tvar id = $(this).attr('data-vid');\n\t\tcourses.render.stage.setActiveVid(id);\n\t\tcourses.render.stage.iframe();\n\t\treturn false;\n\t});\n});\n\n\n//# sourceURL=webpack:///./single-courses.js?");

/***/ })

/******/ });
