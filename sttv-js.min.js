var _st={request:function(e){var t={url:e.route||"",method:e.method||"GET",headers:e.headers||{},processData:!1,dataType:e.dataType||"json",success:function(t){void 0!==e.success&&e.success(t)},error:function(t,s,a){void 0!==e.error&&e.error([t,s,a])}};"GET"!==t.method&&(t.data=JSON.stringify(e.cdata||{})),void 0!==e.accepts&&(t.accepts=e.accepts),$.ajax(t)},closer:function(e){jQuery("body").removeClass("nav-sidebar-open login-sidebar-open"),"function"==typeof e&&e()},heartBeat:function(){_st.request({route:stajax.rootURL+"/ping.php",success:function(e){try{if(!e)throw new Exception("Invalid response from _st.heartBeat.");do{$(document).dequeue("heartbeat")}while($(document).queue("heartbeat").length)}catch(e){console.log(e)}},error:function(e,t,s){Materialize.toast("Offline",6e3),console.log(e,t,s)}})},fn:function(){}};!function(e){"use strict";e("#main-menu").click(function(t){t.preventDefault(),e(this).is("#login")?e("body").addClass("login-sidebar-open"):e("body").addClass("nav-sidebar-open")}),e("#acctmodal, .close").on("click touchstart",function(e){e.preventDefault(),_st.closer()}),e(".read-more").on("click touchstart",function(t){t.preventDefault(),e(this).parent().css({display:"none"}),e("#content-wrapper").css({"max-height":"none"})});var t=e("body.nav-sidebar-open #main-nav");t.on("click touchstart",function(e){e.offsetX>t.offsetWidth&&(alert("Clicked!"),e.preventDefault(),_st.closer())}),e("li.menu-item-has-children>a").click(function(t){t.preventDefault(),e(this).siblings("ul.sub-menu").toggleClass("active").promise().done(function(){e("ul.sub-menu").not(this).removeClass("active")})}),e("form#sttv_login_form").on("submit",function(t){if(t.preventDefault(),0!==e("#sttv_user").val().length){var s='<img src="'+stajax.contentURL+'/i/sttv-spinner.gif" alt="Loading..." />',a=e(".loading_overlay");a.append(s).promise().done(function(){e(this).fadeIn(250)}),_st.request({route:stajax.rest.url+"/auth?action=login",method:"POST",headers:{"X-WP-Nonce":stajax.rest.nonce,"X-STTV-Auth":btoa(this.sttv_user.value+":"+this.sttv_pass.value)},success:function(t){"login_success"==t.code&&(a.empty().html('<p class="sblock"><strong><i class="material-icons">done</i></strong></p>').fadeIn(250),e(".sblock").hide().fadeIn(250),setTimeout(function(){window.location.href=t.redirect},250))},error:function(t){var s=t[0].responseJSON,n=void 0!==s.errors.too_many_retries?s.errors.too_many_retries[0]:s.message;e(".message").html(n),a.fadeOut(250),console.log(s)}})}else e(".message").html("Username is required")}),e("form#sttv_contact").on("submit",function(t){t.preventDefault();var s=e(".loading_overlay",e(this).parent()).html('<img src="'+stajax.contentURL+'/i/sttv-spinner.gif" alt="Loading..." />');s.fadeIn(250),_st.request({route:stajax.rest.url+"/contact",method:"POST",headers:{"X-WP-Nonce":stajax.rest.nonce},cdata:{g_recaptcha_response:grecaptcha.getResponse(),sttv_contact_name:this.sttv_contact_name.value,sttv_contact_email:this.sttv_contact_email.value,sttv_contact_subject:this.sttv_contact_subject.value,sttv_contact_message:this.sttv_contact_message.value},success:function(t){if(console.log(t),t.sent){s.empty().html('<p class="sblock"><strong><i class="material-icons">done</i></strong></p>').fadeIn(250);var a=e(".sblock");e("<p/>",{class:"smessage"}).appendTo(a).append(t.message),e(".sblock").hide().fadeIn(250)}else e(".message").html(t.message),s.fadeOut(250)},error:function(t){e(".message").html("Something went wrong. Please refresh the page and try again."),s.fadeOut(250),console.log(t)}})}),e("#subscribe_page_mc").on("submit",function(t){t.preventDefault();var s=e(this),a=e(".loading_overlay",e(this).parent()).html('<img src="'+stajax.contentURL+'/i/sttv-spinner.gif" alt="Loading..." />');a.fadeIn(250);var n={fname:e("#sttv_mc_fname",s).val(),lname:e("#sttv_mc_lname",s).val(),email:e("#sttv_mc_email",s).val(),g_recaptcha_response:grecaptcha.getResponse()};_st.request({route:stajax.rest.url+"/subscribe",method:"POST",cdata:n,headers:{"X-WP-Nonce":stajax.rest.nonce},success:function(t){e("input, button",s).prop("disabled",!0),grecaptcha.reset(),a.empty().html('<p class="sblock"><strong><i class="material-icons">done</i></strong></p>').fadeIn(250);var n=e(".sblock");e("<p/>",{class:"smessage"}).appendTo(n).append(t.message),e(".sblock").hide().fadeIn(250),console.log(t)},error:function(t){e(".message",s).html("Something went wrong. Please refresh the page and try again."),a.fadeOut(250),console.log(t)}})})}(jQuery),function(e){"use strict";e(document).ready(function(){e("select").material_select()})}(jQuery);
//# sourceMappingURL=sttv-js.min.js.map
