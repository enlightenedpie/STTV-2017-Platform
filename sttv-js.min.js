var closerFunc=function(e){jQuery("body").removeClass("nav-sidebar-open login-sidebar-open"),void 0===e&&(e=function(){return!0}),e()};!function(e){"use strict";var t={request:function(t){var s={url:t.route||"",method:t.method||"GET",headers:t.headers||{},processData:!1,dataType:t.dataType||"json",success:function(e){void 0!==t.success&&t.success(e)},error:function(e,s,a){void 0!==t.error&&t.error([e,s,a])}};"GET"!==s.method&&(s.data=JSON.stringify(t.cdata||{})),e.ajax(s)}};e("#main-menu").click(function(t){t.preventDefault(),e(this).is("#login")?e("body").addClass("login-sidebar-open"):e("body").addClass("nav-sidebar-open")}),e("#acctmodal, .close").on("click touchstart",function(e){e.preventDefault(),closerFunc()}),e(".read-more").on("click touchstart",function(t){t.preventDefault(),e(this).parent().css({display:"none"}),e("#content-wrapper").css({"max-height":"none"})});var s=e("body.nav-sidebar-open #main-nav");s.on("click touchstart",function(e){e.offsetX>s.offsetWidth&&(alert("Clicked!"),e.preventDefault(),closerFunc())}),e("li.menu-item-has-children>a").click(function(t){t.preventDefault(),e(this).siblings("ul.sub-menu").toggleClass("active").promise().done(function(){e("ul.sub-menu").not(this).removeClass("active")})}),e("form#sttv_login_form").on("submit",function(s){if(s.preventDefault(),0!==e("#sttv_user").val().length){var a='<img src="'+stajax.contentURL+'/i/sttv-spinner.gif" alt="Loading..." />',n=e(".loading_overlay");n.append(a).promise().done(function(){e(this).fadeIn(250)}),t.request({route:stajax.rest.url+"/auth?action=login",method:"POST",headers:{"X-WP-Nonce":stajax.rest.nonce,"X-STTV-Auth":btoa(this.sttv_user.value+":"+this.sttv_pass.value)},success:function(t){"login_success"==t.code&&(n.empty().html('<p class="sblock"><strong><i class="material-icons">done</i></strong></p>').fadeIn(250),e(".sblock").hide().fadeIn(250),setTimeout(function(){window.location.href=t.redirect},250))},error:function(t){var s=t[0].responseJSON,a=void 0!==s.errors.too_many_retries?s.errors.too_many_retries[0]:s.message;e(".message").html(a),n.fadeOut(250),console.log(s)}})}else e(".message").html("Username is required")}),e("form#sttv_contact").on("submit",function(s){s.preventDefault();var a=e(".loading_overlay",e(this).parent()).html('<img src="'+stajax.contentURL+'/i/sttv-spinner.gif" alt="Loading..." />');a.fadeIn(250),t.request({route:stajax.rest.url+"/contact",method:"POST",headers:{"X-WP-Nonce":stajax.rest.nonce},cdata:{g_recaptcha_response:grecaptcha.getResponse(),sttv_contact_name:this.sttv_contact_name.value,sttv_contact_email:this.sttv_contact_email.value,sttv_contact_subject:this.sttv_contact_subject.value,sttv_contact_message:this.sttv_contact_message.value},success:function(t){if(console.log(t),t.sent){a.empty().html('<p class="sblock"><strong><i class="material-icons">done</i></strong></p>').fadeIn(250);var s=e(".sblock");e("<p/>",{class:"smessage"}).appendTo(s).append(t.message),e(".sblock").hide().fadeIn(250)}else e(".message").html(t.message),a.fadeOut(250)},error:function(t){e(".message").html("Something went wrong. Please refresh the page and try again."),a.fadeOut(250),console.log(t)}})}),e("#subscribe_page_mc").on("submit",function(s){s.preventDefault();var a=e(this),n=e(".loading_overlay",e(this).parent()).html('<img src="'+stajax.contentURL+'/i/sttv-spinner.gif" alt="Loading..." />');n.fadeIn(250);var o={fname:e("#sttv_mc_fname",a).val(),lname:e("#sttv_mc_lname",a).val(),email:e("#sttv_mc_email",a).val(),g_recaptcha_response:grecaptcha.getResponse()};t.request({route:stajax.rest.url+"/subscribe",method:"POST",cdata:o,headers:{"X-WP-Nonce":stajax.rest.nonce},success:function(t){e("input, button",a).prop("disabled",!0),grecaptcha.reset(),n.empty().html('<p class="sblock"><strong><i class="material-icons">done</i></strong></p>').fadeIn(250);var s=e(".sblock");e("<p/>",{class:"smessage"}).appendTo(s).append(t.message),e(".sblock").hide().fadeIn(250),console.log(t)},error:function(t){e(".message",a).html("Something went wrong. Please refresh the page and try again."),n.fadeOut(250),console.log(t)}})})}(jQuery),function(e){"use strict";e(document).ready(function(){e("select").material_select()})}(jQuery);
//# sourceMappingURL=sttv-js.min.js.map
