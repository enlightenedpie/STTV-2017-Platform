var closerFunc=function(e){jQuery("body").removeClass("nav-sidebar-open login-sidebar-open"),void 0===e&&(e=function(){return!0}),e()};!function(e){"use strict";var t={request:function(t){var o={url:t.route||"",method:t.method||"GET",headers:t.headers||{},processData:!1,dataType:t.dataType||"json",success:function(e){void 0!==t.success&&t.success(e)},error:function(e,o,s){void 0!==t.error&&t.error([e,o,s])}};"GET"!==o.method&&(o.data=JSON.stringify(t.cdata||{})),e.ajax(o)}};e("#main-menu").click(function(t){t.preventDefault(),e(this).is("#login")?e("body").addClass("login-sidebar-open"):e("body").addClass("nav-sidebar-open")}),e("#acctmodal, .close").on("click touchstart",function(e){e.preventDefault(),closerFunc()}),e(".read-more").on("click touchstart",function(t){t.preventDefault(),e(this).parent().css({display:"none"}),e("#content-wrapper").css({"max-height":"none"})});var o=e("body.nav-sidebar-open #main-nav");o.on("click touchstart",function(e){e.offsetX>o.offsetWidth&&(alert("Clicked!"),e.preventDefault(),closerFunc())}),e("li.menu-item-has-children>a").click(function(t){t.preventDefault(),e(this).siblings("ul.sub-menu").toggleClass("active").promise().done(function(){e("ul.sub-menu").not(this).removeClass("active")})}),e("form#sttv_login_form").on("submit",function(o){if(o.preventDefault(),0!==e("#sttv_user").val().length){var s='<img src="'+stajax.contentURL+'/i/sttv-spinner.gif" alt="Loading..." />',n=e(".loading_overlay");n.append(s).promise().done(function(){e(this).fadeIn(250)}),t.request({route:stajax.rest.url+"/auth?action=login",method:"POST",headers:{"X-WP-Nonce":stajax.rest.nonce,"X-STTV-Auth":btoa(this.sttv_user.value+":"+this.sttv_pass.value)},success:function(t){"login_success"==t.code&&(n.empty().html('<p class="sblock"><strong><i class="material-icons">done</i></strong></p>').fadeIn(250),e(".sblock").hide().fadeIn(250),setTimeout(function(){window.location.href=t.redirect},250))},error:function(t){var o=t[0].responseJSON,s=void 0!==o.errors.too_many_retries?o.errors.too_many_retries[0]:o.message;e(".message").html(s),n.fadeOut(250),console.log(o)}})}else e(".message").html("Username is required")})}(jQuery),function(e){"use strict";e(document).ready(function(){e("select").material_select()}),e("#logout-btn a").click(function(t){t.preventDefault(),e.post(stajax.rest.url+"/auth?action=logout",function(e){window.location.href=e})})}(jQuery),$(".suitter").click(function(e){e.preventDefault();var t={form:$(this).closest("form"),token:$(".g-recaptcha-response",this.form).val(),whichForm:$('input[name="whichform"]',this.form).val()};t.formSer=t.form.serialize(),t.formData={action:"sttvsubmitter",value:t.formSer},t.action={ld:$(".loading_overlay",t.form.parent()),postForm:function(){return $.post(stajax.ajaxURL,t.formData,function(e){},"json")},beforeSubmit:function(){var e='<img src="'+stajax.contentURL+'/i/sttv-spinner.gif" alt="Loading..." />';this.ld.html(e).promise().done(function(){$(this).fadeIn(500)})},formSuccess:function(e){var o=e.data;if(this.ld.empty().html('<p class="sblock"><i class="material-icons">done</i></p>').fadeIn(500),o.name)$(".sblock",this.ld).hide().fadeIn(500,function(){window.location.replace("/my-account")});else if(o.sent||o.subscribed){var s=$(".sblock",this.ld);$("<p/>",{class:"smessage"}).appendTo(s).append(o.message),$("#"+t.form.attr("id")+" :input").prop("disabled",!0)}else alert("Something went wrong. Please reload the page.")},formFail:function(e){this.ld.fadeOut(500),$("p.message",t.form).html(e.data.message).css("display","block")}};var o=t.action;null==t.token||0!==t.token.length?(o.beforeSubmit(),o.postForm().done(function(e){return e.success?o.formSuccess(e):o.formFail(e)})):alert("Please prove you're not a robot!")});
//# sourceMappingURL=sttv-js.min.js.map
