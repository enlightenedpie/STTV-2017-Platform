var _st =
/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _config = __webpack_require__(1);

var _config2 = _interopRequireDefault(_config);

var _checkout = __webpack_require__(2);

var _checkout2 = _interopRequireDefault(_checkout);

var _subscribe = __webpack_require__(3);

var _subscribe2 = _interopRequireDefault(_subscribe);

var _login = __webpack_require__(6);

var _login2 = _interopRequireDefault(_login);

var _modal = __webpack_require__(7);

var _modal2 = _interopRequireDefault(_modal);

var _mu = __webpack_require__(8);

var _mu2 = _interopRequireDefault(_mu);

var _index = __webpack_require__(9);

var func = _interopRequireWildcard(_index);

__webpack_require__(16);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var STTV = function () {
	function STTV() {
		_classCallCheck(this, STTV);

		this.stripe = _config2.default[_config2.default.env].stripe;
		this.root = 'http://localhost:8888/sttvroot';
		this.resources = {
			api: 'https://api.supertutortv.com/v2',
			app: 'https://courses.supertutortv.com',
			content: this.root + '/wp-content/themes/sttvsite'
		};
		this.checkout = _checkout2.default;
		this.subscribe = _subscribe2.default;
		this.login = _login2.default;
		this.modal = _modal2.default;
		this.mu = _mu2.default;
	}

	_createClass(STTV, [{
		key: 'analytics',
		value: function analytics(obj) {
			return func.analytics.call(this, obj);
		}
	}, {
		key: 'dismiss',
		value: function dismiss(cb) {
			return func.dismiss.call(this, cb);
		}
	}, {
		key: 'menuToggle',
		value: function menuToggle(cb) {
			return func.menuToggle.call(this, cb);
		}
	}, {
		key: 'parseParams',
		value: function parseParams(str, regex) {
			return func.parseParams.call(this, str, regex);
		}
	}, {
		key: 'request',
		value: function request(obj) {
			return func.request.call(this, obj);
		}
	}, {
		key: 'scroll',
		value: function scroll(a) {
			return func.scroll.call(this, a);
		}
	}]);

	return STTV;
}();

module.exports = new STTV();

/***/ }),
/* 1 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
var config = {
    env: 'staging',
    production: {
        stripe: {
            publicKey: 'pk_live_ns71ckv2wHyLaP7CCyxp3DS7'
        }
    },
    staging: {
        stripe: {
            publicKey: 'pk_test_aF7R0He4Yt4OYgAq3iERimgn'
        }
    },
    development: {
        stripe: {
            publicKey: 'pk_test_aF7R0He4Yt4OYgAq3iERimgn'
        }
    }
};

exports.default = config;

/***/ }),
/* 2 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

/* Let's define the checkout object with methods and properties */
var Checkout = function () {
	function Checkout(id) {
		_classCallCheck(this, Checkout);

		Object.assign(this, {
			valid: false,
			card: false,
			stripe: null,
			elements: null,
			tempId: id,
			index: 0,
			state: {
				id: '',
				signature: '',
				items: [],
				trial: 0,
				total: 0,
				shipping: 0,
				taxable: 0,
				tax: {
					id: '',
					val: ''
				},
				coupon: {
					id: '',
					val: ''
				},
				email: {
					id: '',
					val: ''
				},
				customer: {
					token: ''
				}
			},
			html: [],
			table: []
		});
	}

	_createClass(Checkout, [{
		key: 'copyAddress',
		value: function copyAddress(el) {
			var billing = this.state.customer.billing,
			    elems = document.querySelectorAll('input.shipping, select.shipping');
			elems.forEach(function (v) {
				if (el.checked) {
					var classes = v.className.split(/\s+/);
					classes.some(function (a) {
						return v.value = billing[a] || '';
					});
				} else {
					if (v.selectedIndex) {
						v.selectedIndex = 0;
					} else {
						v.value = '';
					}
				}
				v.focus();
				v.blur();
			});
		}
	}, {
		key: 'init',
		value: function init(cb) {
			var t = this;
			_st.request({
				route: '/checkout?pricing=' + t.tempId,
				success: function success(data) {
					data.data.html.forEach(function (v) {
						t.html.push($(v));
					});
					t.state.items = data.data.pricing;
					t.update();
					typeof cb === 'function' && cb(t);
					t.setIDSignature();

					ga('ec:addImpression', {
						'id': t.state.signature,
						'name': t.tempID,
						'category': 'Courses/Subscriptions',
						'brand': 'SupertutorTV',
						'list': 'Sales Page'
					});
				},
				error: function error(err) {
					console.log(err);
				}
			});
		}
	}, {
		key: 'next',
		value: function next() {
			if (this.index < 4) {
				var pane = $('#pane-' + this.index),
				    inputs = $('input,select', pane),
				    t = this;
				return this.validate(inputs, function (inp) {
					t.update(inp.serializeArray());
					t.html[t.index] = pane;
					t.index++;
					t.render();
				});
			}
		}
	}, {
		key: 'prev',
		value: function prev() {
			if (this.index > 1) {
				var pane = $('#pane-' + this.index),
				    inputs = $('input,select', pane);
				this.update(inputs.serializeArray());
				this.html[this.index] = pane;
				this.index--;
				this.render();
			}
		}
	}, {
		key: 'pricer',
		value: function pricer(price) {
			return (Math.round(price) / 100).toFixed(2);
		}
	}, {
		key: 'render',
		value: function render(el) {
			var t = this;
			if (t.index === 0) {
				var wrapper = $('<div id="st-checkout-wrapper" class="col s12"></div>');
				if (typeof el !== 'undefined') wrapper.appendTo(el);
				t.html.forEach(function (v) {
					wrapper.append(v);
				});
				t.index++;
			} else {
				var wrapper = $('#st-checkout-wrapper');
			}

			var currentPane = $('#pane-' + t.index);

			this.renderItemsTable();

			$('.st-checkout-pane').fadeOut(100, function () {
				$(this).removeClass('active').hide();
			});
			setTimeout(function () {
				currentPane.show();
				setTimeout(function () {
					currentPane.addClass('active');
				}, 100);
			}, 100);
		}
	}, {
		key: 'renderItemsTable',
		value: function renderItemsTable() {
			var t = this;
			$('.items-row').fadeOut(100, function () {
				var that = $(this);
				that.empty();

				t.table.forEach(function (row) {
					that.append($(row));
				});

				$('#ttltxt>span').text(t.pricer(t.state.total));
			}).fadeIn(100);
		}
	}, {
		key: 'setChecker',
		value: function setChecker(el) {
			function clear(el, reset) {
				$('p.error').text('');
				el.classList.remove('valid', 'invalid');
				if (typeof reset !== 'undefined' && reset) t.state[p] = { 'id': '', 'val': '' };
				t.update().renderItemsTable();
				return true;
			}
			var t = this,
			    params = ['coupon', 'email', 'tax'],
			    p = false;
			params.some(function (v) {
				if (el.classList.contains(v)) p = v;
				return el.classList.contains(v);
			});

			if (el.value === '') return clear(el, true);

			if (el.value === t.state[p].val) return false;

			_st.request({
				route: '/checkout?' + p + '=' + el.value + '&sig=' + t.state.signature,
				success: function success(d) {
					clear(el);
					switch (d.code) {
						case 'coupon_valid':
						case 'email_available':
						case 'checkout_tax':
							el.classList.add('valid');
							break;
						case 'coupon_invalid':
						case 'coupon_expired':
						case 'email_taken':
							el.classList.add('invalid');
							$('p.error').text(d.message);
							break;
						default:
							return 'What\'re you even doing here?';
					}
					t.state[p] = {
						id: d.id,
						val: d.value
					};
					t.update().renderItemsTable();
				},
				error: function error(x) {
					console.log(x);
				}
			});
			return this;
		}
	}, {
		key: 'setIDSignature',
		value: function setIDSignature() {
			delete this['tempId'];
			this.state.id = Date.now();
			this.state.signature = btoa(navigator.userAgent + '|' + navigator.platform + '|' + navigator.product).replace(/=/g, '');
			return this;
		}
	}, {
		key: 'setIndex',
		value: function setIndex(itm, ind, val) {
			var nInd = ind[0];
			if (typeof ind == 'string') return this.setIndex(itm, ind.split('-'), val);else if (ind.length == 1 && typeof val !== 'undefined') {
				return itm[nInd] = val;
			} else if (ind.length == 0) return itm;else if (typeof itm[nInd] === 'undefined') itm[nInd] = {};
			return this.setIndex(itm[nInd], ind.slice(1), val);
		}
	}, {
		key: 'setOutcome',
		value: function setOutcome(result) {
			var con = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : document;

			var t = this;
			if (typeof result.error !== 'undefined') {
				return $('.error', con).text(result.error.message);
			} else {
				$('.error', con).text('');
			}

			if (!result.empty && result.complete) {
				var inputs = $('input, select', con);
				_st.checkout.validate(inputs, function (inp) {
					t.update(inp.serializeArray());
					t.valid = true;
					t.enableSubmit();
				});
			}
		}
	}, {
		key: 'setState',
		value: function setState(arr) {
			var t = this;
			if (typeof arr !== 'undefined') {
				for (var a = 0; a < arr.length; a++) {
					var v = arr[a].name.split('|');
					for (var i = 0; i < v.length; i++) {
						t.setIndex(t.state, v[i].replace('st-', '').split('-'), arr[a].value);
					}
				}
			}
			return this;
		}
	}, {
		key: 'setShipping',
		value: function setShipping(el) {
			this.state.shipping = el.checked ? 705 : 0;
			this.update();
			return this;
		}
	}, {
		key: 'update',
		value: function update(obj) {
			if (typeof obj !== 'undefined') this.setState(obj);
			var state = this.state,
			    t = this;
			state.total = state.taxable = 0;
			t.table = [];

			for (var i = 0; i < state.items.length; i++) {
				var item = state.items[i];
				state.total += item.price;
				state.taxable += item.taxable_amt;
				t.table.push('<div class="row"><div class="col s8">' + item.name + '</div><div class="col s4 right-align">' + t.pricer(item.price) + '</div></div>');
			}

			var disc = state.coupon.val.match(/\\$([0-9]+)/) || ['0', '0'],
			    discp = state.coupon.val.match(/([0-9]+)%/) || ['0', '0'],
			    discprice = state.total * (parseInt(discp[1]) / 100) || parseInt(disc[1]);

			if (0 < discprice) {
				state.total -= discprice;
				t.table.push('<div class="row"><div class="col s8">Discount (' + state.coupon.id + ')</div><div class="col s4 right-align">-' + t.pricer(discprice) + '</div></div>');
			}

			if (parseFloat(state.tax.val) > 0) {
				var taxxx = state.taxable * parseFloat(state.tax.val) / 100;
				state.total += taxxx;
				t.table.push('<div class="row"><div class="col s8">' + state.tax.id + '</div><div class="col s4 right-align">+' + t.pricer(taxxx) + '</div></div>');
			}

			if (state.shipping > 0) {
				state.total += state.shipping;
				t.table.push('<div class="row"><div class="col s8">Priority Shipping</div><div class="col s4 right-align">+' + t.pricer(state.shipping) + '</div></div>');
			}
			return this;
		}
	}, {
		key: 'setup',
		value: function setup() {
			this.stripe = Stripe(_st.stripe.publicKey);
			this.elements = this.stripe.elements();
			this.card = this.elements.create('card', {
				hidePostalCode: true
			});

			this.card.mount('#st-checkout-card-element');

			var t = this;
			this.card.on('change', function (event) {
				t.setOutcome(event, '#st-checkout-wrapper');
			});
		}
	}, {
		key: 'submit',
		value: function submit() {
			_st.modal.loader();
			var cus = this.state.customer,
			    t = this;

			t.stripe.createToken(t.card, cus.billing).then(function (result) {
				if (result.error) {
					console.log(result.error);
					return _st.modal.loader(function (el) {
						$('.error', el).text(result.error.message);
					});
				} else {
					cus.token = result.token.id;
					cus.shipping.name = cus.firstname + ' ' + cus.lastname;
					delete cus.shipping.copy;

					_st.request({
						route: '/checkout',
						method: 'POST',
						cdata: t.state,
						success: function success(d) {

							if ('stripe_error' === d.code) {
								var ecode = d.error.decline_code || d.error.code;
								_st.modal.loader(function (el) {
									$('p.error', el).html('<span class="col s12">We\'re sorry. ' + d.error.message + '</span><span class="col s12">err code: ' + ecode + '</span>');
								});
								return false;
							}

							var resp = d.response;
							_st.analytics({
								type: 'ec:setAction',
								action: 'purchase',
								data: {
									'id': resp.metadata.checkout_id,
									'revenue': (resp.total / 100).toFixed(2),
									'tax': t.state.tax.val,
									'shipping': t.state.shipping,
									'coupon': t.state.coupon.id,
									'affiliation': 'SupertutorTV Online Store'
								},
								pageview: true,
								page: location.pathname
							});

							setTimeout(function () {
								window.location.href = _st.resources.app;
							}, 1000);
						},
						error: function error(x) {
							var d = x[0].responseJSON;
							console.log(x, d);
						}
					});
				}
			});
		}
	}, {
		key: 'enableSubmit',
		value: function enableSubmit() {
			if (this.valid) {
				document.querySelector('.st-checkout-submit').removeAttribute('disabled');
			}
		}
	}, {
		key: 'disableSubmit',
		value: function disableSubmit() {
			document.querySelector('.st-checkout-submit').setAttribute('disabled', '');
		}
	}, {
		key: 'validate',
		value: function validate(inputs, cb) {
			this.disableSubmit();
			var context = '#st-modal-inner',
			    ctrl = false,
			    inp = inputs.toArray(),
			    msg = ' is invalid';
			inp.some(function (v, i) {
				var t = $(v);
				if (t.is(':required') && (!t.val() || t.hasClass('invalid'))) {
					if (!t.val()) msg = t.attr('placeholder') + ' is required';
					t.addClass('invalid');
					return ctrl = true;
				} else if (t.hasClass('invalid')) {
					msg = t.attr('placeholder') + msg;
					return ctrl = true;
				}
				return false;
			});

			if (ctrl) {
				$('p.error', context).text(msg);
				return !ctrl;
			}

			$('p.error', context).text('');
			typeof cb === 'function' && cb(inputs);
		}
	}]);

	return Checkout;
}();

exports.default = Checkout;

/***/ }),
/* 3 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _form = __webpack_require__(4);

var _form2 = _interopRequireDefault(_form);

var _stDom = __webpack_require__(5);

var _stDom2 = _interopRequireDefault(_stDom);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Subscribe = function (_Form) {
    _inherits(Subscribe, _Form);

    function Subscribe() {
        _classCallCheck(this, Subscribe);

        return _possibleConstructorReturn(this, (Subscribe.__proto__ || Object.getPrototypeOf(Subscribe)).call(this, {
            firstname: '',
            lastname: '',
            email: ''
        }));
    }

    _createClass(Subscribe, [{
        key: 'submit',
        value: function submit() {
            var _this2 = this;

            this.send('/forms/subscribe', function (d) {
                if (d.code === 'sub_error') return _this2.printError(d.message);else return _this2.success(d.message);
            });
        }
    }, {
        key: 'success',
        value: function success(msg) {
            var el = document.querySelector('#stMailinglistOverlay'),
                form = document.querySelector('#stMailinglistWrapperInner');
            el.innerHTML = '<span>' + msg + '</span>';
            return el.classList.add('active') || form.classList.add('inactive');
        }
    }]);

    return Subscribe;
}(_form2.default);

exports.default = Subscribe;

/***/ }),
/* 4 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var Form = function () {
    function Form() {
        var obj = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

        _classCallCheck(this, Form);

        this.state = obj;
    }

    _createClass(Form, [{
        key: 'overlay',
        value: function overlay() {
            return document.querySelector('.stOverlay').classList.toggle('active');
        }
    }, {
        key: 'prepare',
        value: function prepare(el) {
            return this.setState([{
                name: el.name,
                value: el.value
            }]);
        }
    }, {
        key: 'printError',
        value: function printError(msg) {
            return document.querySelector('#stFormErrors').innerHTML = msg;
        }
    }, {
        key: 'setIndex',
        value: function setIndex(itm, ind, val) {
            var nInd = ind[0];
            if (typeof ind == 'string') return this.setIndex(itm, ind.split('-'), val);else if (ind.length == 1 && typeof val !== 'undefined') {
                return itm[nInd] = val;
            } else if (ind.length == 0) return itm;else if (typeof itm[nInd] === 'undefined') itm[nInd] = {};
            return this.setIndex(itm[nInd], ind.slice(1), val);
        }
    }, {
        key: 'setState',
        value: function setState(arr) {
            var t = this;
            if (typeof arr !== 'undefined') {
                for (var a = 0; a < arr.length; a++) {
                    var v = arr[a].name.split('|');
                    for (var i = 0; i < v.length; i++) {
                        t.setIndex(t.state, v[i].replace('st-', '').split('-'), arr[a].value);
                    }
                }
            }
            return this;
        }
    }, {
        key: 'send',
        value: function send(rt, cb) {
            for (var val in this.state) {
                if (this.state[val].length == 0) return val;
            }
            this.overlay();

            _st.request({
                route: rt,
                method: 'POST',
                cdata: this.state,
                success: function success(d) {
                    typeof cb === 'function' && cb(d);
                },
                error: function error(x) {
                    console.log(x);
                }
            });
        }
    }]);

    return Form;
}();

exports.default = Form;

/***/ }),
/* 5 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
var stDom = function stDom(type, stuff) {
    for (var _len = arguments.length, children = Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {
        children[_key - 2] = arguments[_key];
    }

    var appendText = function appendText(el, text) {
        var textNode = document.createTextNode(text);
        el.appendChild(textNode);
    };

    var appendArray = function appendArray(el, children) {
        children.forEach(function (child) {
            if (Array.isArray(child)) appendArray(el, child);else if (child instanceof window.Element) el.appendChild(child);else if (typeof child === 'string') appendText(el, child);
        });
    };

    var el = document.createElement(type);
    appendText(el, text);
    return el;
};

var div = exports.div = function div() {
    for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
        args[_key2] = arguments[_key2];
    }

    return stDom.apply(undefined, ['div'].concat(args));
};
var section = exports.section = function section() {
    for (var _len3 = arguments.length, args = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {
        args[_key3] = arguments[_key3];
    }

    return stDom.apply(undefined, ['section'].concat(args));
};

/***/ }),
/* 6 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _form = __webpack_require__(4);

var _form2 = _interopRequireDefault(_form);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Login = function (_Form) {
  _inherits(Login, _Form);

  function Login() {
    _classCallCheck(this, Login);

    return _possibleConstructorReturn(this, (Login.__proto__ || Object.getPrototypeOf(Login)).call(this, {
      username: '',
      password: ''
    }));
  }

  _createClass(Login, [{
    key: 'submit',
    value: function submit() {
      var _this2 = this;

      this.send('/auth/token', function (d) {
        if (d.code === 'login_fail') return _this2.printError(d.message) && _this2.overlay();else window.location.href = _st.resources.app;
      });
    }
  }]);

  return Login;
}(_form2.default);

exports.default = Login;

/***/ }),
/* 7 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var Modal = function () {
  function Modal() {
    _classCallCheck(this, Modal);

    this.action = '', this.element = $('#st-modal-inner-content');
    this.inner = $('#st-modal-inner-content-inner');
  }

  _createClass(Modal, [{
    key: 'init',
    value: function init(act, extra) {
      var t = this;
      if (typeof act === 'undefined') return false;
      if (t.action === act) return t.toggle();

      var cb;
      if (act !== 'close') {
        t.action = act;
        t.loader(function () {
          t.inner.empty();
          t.element.removeClass('st-quiet-load');
        });
      }

      switch (act) {
        case 'close':
          cb = function cb() {
            setTimeout(function () {
              $('#st-modal').hide();
            }, 250);
          };
          break;
        case 'login':
          cb = function cb(el) {
            _st.login = new _st.login(el);
          };
          break;
        case 'mu-signup':
          cb = function cb(el) {
            _st.mu = new _st.mu(el);
          };
          break;
        case 'sttv-cart':
        case 'checkout':
          var ex = extra.dataset.course;
          cb = function cb(el) {
            _st.checkout = new _st.checkout(ex);
            _st.checkout.init(function (x) {
              x.render(el);
              t.loader();
            });
          };
          break;
      }
      t.toggle(cb);
    }
  }, {
    key: 'toggle',
    value: function toggle(cb) {
      $('#st-modal').show();
      $('body').toggleClass('modal-open');
      typeof cb === 'function' && cb(this.inner);
    }
  }, {
    key: 'loader',
    value: function loader(cb) {
      this.element.toggleClass('loader-active');
      typeof cb === 'function' && cb(this.inner);
    }
  }]);

  return Modal;
}();

exports.default = new Modal();

/***/ }),
/* 8 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _form = __webpack_require__(4);

var _form2 = _interopRequireDefault(_form);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var MU = function (_Form) {
  _inherits(MU, _Form);

  function MU() {
    _classCallCheck(this, MU);

    return _possibleConstructorReturn(this, (MU.__proto__ || Object.getPrototypeOf(MU)).call(this, {
      mukey: '',
      email: '',
      firstname: '',
      lastname: '',
      password: ''
    }));
  }

  _createClass(MU, [{
    key: 'submit',
    value: function submit() {
      var _this2 = this;

      this.send('/multiuser/signup', function (d) {
        if (d.code !== 'multiuser_signup_success') return _this2.printError(d.message) && _this2.overlay();else return window.location.replace(d.redirect);
      });
    }
  }]);

  return MU;
}(_form2.default);

exports.default = MU;

/***/ }),
/* 9 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.scroll = exports.dismiss = exports.menuToggle = exports.parseParams = exports.request = exports.analytics = undefined;

var _analytics = __webpack_require__(10);

var _analytics2 = _interopRequireDefault(_analytics);

var _request = __webpack_require__(11);

var _request2 = _interopRequireDefault(_request);

var _parseParams = __webpack_require__(12);

var _parseParams2 = _interopRequireDefault(_parseParams);

var _menuToggle = __webpack_require__(13);

var _menuToggle2 = _interopRequireDefault(_menuToggle);

var _dismiss = __webpack_require__(14);

var _dismiss2 = _interopRequireDefault(_dismiss);

var _scroll = __webpack_require__(15);

var _scroll2 = _interopRequireDefault(_scroll);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

exports.analytics = _analytics2.default;
exports.request = _request2.default;
exports.parseParams = _parseParams2.default;
exports.menuToggle = _menuToggle2.default;
exports.dismiss = _dismiss2.default;
exports.scroll = _scroll2.default;

/***/ }),
/* 10 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

var analytics = function analytics(obj) {
  if (typeof obj === 'undefined') {
    return false;
  }

  var page = obj.page || false,
      pageview = obj.pageview || false,
      event = obj.event || false,
      action = obj.action || obj.data,
      data = obj.data || false;

  if (typeof action === 'string' && (typeof data === 'undefined' ? 'undefined' : _typeof(data)) === 'object') {
    //console.log( "ga( "+obj.type+", "+action+", "+data+" )" )
    ga(obj.type, action, data);
  } else if (typeof obj.type !== 'undefined') {
    //console.log( "ga( "+obj.type+", "+action+" )" )
    ga(obj.type, action);
  }

  if (event) {
    //console.log( "ga( 'send', 'event', "+event+" )" )
    ga('send', 'event', event.name);
  }

  return pageview ? page ? ga('send', 'pageview', page) : ga('send', 'pageview') : pageview;
};

exports.default = analytics;

/***/ }),
/* 11 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
var request = function request(obj) {
  var ajaxp = {
    url: _st.resources.api + obj.route,
    method: obj.method || 'GET',
    headers: obj.headers || {},
    data: obj.cdata || {},
    processData: false,
    dataType: 'json',
    xhrFields: { withCredentials: true },
    crossDomain: true,
    success: function success(data) {
      typeof obj.success !== 'undefined' && obj.success(data);
    },
    error: function error(x, s, r) {
      typeof obj.error !== 'undefined' && obj.error([x, s, r]);
    }
  };
  if (ajaxp.method !== 'GET') {
    ajaxp['data'] = JSON.stringify(obj.cdata || {});
  }
  if (typeof obj.accepts !== 'undefined') {
    ajaxp['accepts'] = obj.accepts;
  }
  $.ajax(ajaxp);
};

exports.default = request;

/***/ }),
/* 12 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
var parseParams = function parseParams(str, regex) {
    return (str || document.location.search).replace(/(^\?)/, '').replace(regex, '').split("&").map(function (n) {
        return n = n.split("="), this[n[0]] = n[1], this;
    }.bind({}))[0];
};
exports.default = parseParams;

/***/ }),
/* 13 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
var menuToggle = function menuToggle(cb) {
    $('body').toggleClass('nav-sidebar-open');
    typeof cb === 'function' && cb();
};
exports.default = menuToggle;

/***/ }),
/* 14 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
var dismiss = function dismiss(cb) {
    document.querySelector('body').classList.remove('nav-sidebar-open', 'modal-open');
    typeof cb === 'function' && cb();
};
exports.default = dismiss;

/***/ }),
/* 15 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
var scroll = function scroll(a) {
  a = a || 'footer';
  $('html, body').stop().animate({
    scrollTop: $(a).offset().top - 100
  }, 1250, "swing");
};
exports.default = scroll;

/***/ }),
/* 16 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var _jquery = __webpack_require__(17);

var _jquery2 = _interopRequireDefault(_jquery);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

(0, _jquery2.default)(document).ready(function () {
    (0, _jquery2.default)('.parallax').parallax();
    (0, _jquery2.default)('.sidenav').sidenav();
    (0, _jquery2.default)('.st-dropdown-trigger').dropdown();
});

(0, _jquery2.default)(document).on('click', '.loodabooda', function (e) {
    e.preventDefault();
    _st.modal.init('login');
});

// END Checkout form handlers //

// ########################## //

// BEGIN Contact form handler //
(0, _jquery2.default)('form#sttv_contact').on('submit', function (e) {
    e.preventDefault();
    var loading = (0, _jquery2.default)('.loading_overlay', (0, _jquery2.default)(this).parent()).html('<img src="' + _st.resources.content + '/i/sttv-spinner.gif" alt="Loading..." />');

    loading.fadeIn(250);

    _st.request({
        route: '/contact',
        method: 'POST',
        cdata: {
            g_recaptcha_response: grecaptcha.getResponse(),
            sttv_contact_name: this.sttv_contact_name.value,
            sttv_contact_email: this.sttv_contact_email.value,
            sttv_contact_subject: this.sttv_contact_subject.value,
            sttv_contact_message: this.sttv_contact_message.value
        },
        success: function success(data) {
            console.log(data);
            if (data.sent) {
                loading.empty().html('<p class="sblock"><strong><i class="material-icons">done</i></strong></p>').fadeIn(250);
                var s = (0, _jquery2.default)('.sblock');
                var p = (0, _jquery2.default)('<p/>', { "class": "smessage" });
                p.appendTo(s).append(data.message);
                (0, _jquery2.default)('.sblock').hide().fadeIn(250);
            } else {
                (0, _jquery2.default)('.message').html(data.message);
                loading.fadeOut(250);
            }
        },
        error: function error(x) {
            (0, _jquery2.default)('.message').html('Something went wrong. Please refresh the page and try again.');
            loading.fadeOut(250);
            console.log(x);
        }
    });
});
// END Contact form handler //

// ########################## //

// BEGIN Login form handler //
(0, _jquery2.default)(document).on('submit', 'form#sttv_login_form', function (e) {
    e.preventDefault();
    if (0 === (0, _jquery2.default)('#sttv_user').val().length) {
        (0, _jquery2.default)('.message').html('Username is required');
        return;
    }

    var loader = '<img src="' + _st.resources.content + '/i/sttv-spinner.gif" alt="Loading..." />',
        ld = (0, _jquery2.default)('.loading_overlay');
    ld.append(loader).promise().done(function () {
        (0, _jquery2.default)(this).fadeIn(250);
    });

    _st.request({
        route: '/auth?action=login',
        method: 'POST',
        headers: {
            'X-STTV-Auth': btoa(this.sttv_user.value + ':' + this.sttv_pass.value)
        },
        success: function success(data) {
            if (data.code == 'login_success') {
                ld.empty().html('<p class="sblock"><strong><i class="material-icons">done</i></strong></p>').fadeIn(250);
                (0, _jquery2.default)('.sblock').hide().fadeIn(250);
                setTimeout(function () {
                    window.location.href = data.redirect;
                }, 250);
            }
        },
        error: function error(x) {
            var data = x[0].responseJSON,
                msg = typeof data.errors.too_many_retries !== 'undefined' ? data.errors.too_many_retries[0] : data.message;

            (0, _jquery2.default)('.message').html(msg);
            ld.fadeOut(250);
            console.log(data);
        }
    });
});
// END Login form handler //

// ########################## //

// BEGIN Menu toggle handler //
(0, _jquery2.default)(document).on('click', '.slide-bar', function (e) {
    e.preventDefault();
    _st.menuToggle();
});
// END Menu toggle handler //

// ########################## //

// BEGIN Modal window handler
var selectors = '.st-dismiss, .mu-signup, .mu-submitter, .cart-fab';
(0, _jquery2.default)(document).on('click', selectors, function (e) {
    e.preventDefault();
    var t = (0, _jquery2.default)(this),
        c = t.attr('class').split(/\s+/),
        tda = t.attr('data-action');

    var f = {
        'mu-signup': 'mu-signup',
        'st-dismiss': 'close',
        'mu-submitter': 'mu-checkout',
        'cart-fab': 'sttv-cart'
    };

    c.some(function (v) {
        typeof f[v] !== 'undefined' && _st.modal.init(f[v]);
    });
});
// END Modal window handler //

// ########################## //

// BEGIN 'Read More' mobile button handler //
(0, _jquery2.default)(document).on('click', '.readMore', function (e) {
    e.preventDefault();
    (0, _jquery2.default)(this).parent().css({ 'display': 'none' });
    (0, _jquery2.default)('#stContentWrapper').css({ 'max-height': 'none' });
});
// END 'Read More' mobile button handler //

// ########################## //

// BEGIN click scroll handler //
(0, _jquery2.default)(document).on('click', '.st-scroll', function (e) {
    e.preventDefault();
    _st.scroll(e.target.getAttribute('href'));
});
// END click scroll handler //

// ########################## //

// BEGIN Mailinglist Subscribe form handler //
(0, _jquery2.default)('#subscribe_page_mc').on('submit', function (e) {
    e.preventDefault();
    var form = (0, _jquery2.default)(this);

    var loading = (0, _jquery2.default)('.loading_overlay', (0, _jquery2.default)(this).parent()).html('<img src="' + _st.resources.content + '/i/sttv-spinner.gif" alt="Loading..." />');

    loading.fadeIn(250);

    var fields = {
        fname: (0, _jquery2.default)('#sttv_mc_fname', form).val(),
        lname: (0, _jquery2.default)('#sttv_mc_lname', form).val(),
        email: (0, _jquery2.default)('#sttv_mc_email', form).val(),
        g_recaptcha_response: grecaptcha.getResponse()
    };

    _st.request({
        route: '/subscribe',
        method: 'POST',
        cdata: fields,
        success: function success(d) {
            (0, _jquery2.default)('input, button', form).prop('disabled', true);
            grecaptcha.reset();
            loading.empty().html('<p class="sblock"><strong><i class="material-icons">done</i></strong></p>').fadeIn(250);
            var s = (0, _jquery2.default)('.sblock');
            var p = (0, _jquery2.default)('<p/>', { "class": "smessage" });
            p.appendTo(s).append(d.message);
            (0, _jquery2.default)('.sblock').hide().fadeIn(250);
            console.log(d);
        },
        error: function error(x) {
            (0, _jquery2.default)('.message', form).html('Something went wrong. Please refresh the page and try again.');
            loading.fadeOut(250);
            console.log(x);
        }
    });
});
// END Mailinglist Subscribe form handler //

/***/ }),
/* 17 */
/***/ (function(module, exports) {

module.exports = jQuery;

/***/ })
/******/ ]);