{"version":3,"sources":["modules/base/_sss.js","modules/sttv-material.js","modules/sttv-validate.js"],"names":["closerFunc","callback","jQuery","removeClass","$","_st","request","obj","ajaxp","url","route","method","headers","processData","dataType","success","data","error","x","s","r","JSON","stringify","cdata","ajax","click","e","preventDefault","this","is","addClass","on","parent","css","display","max-height","thenav","offsetX","offsetWidth","alert","siblings","toggleClass","promise","done","not","val","length","loader","stajax","contentURL","ld","append","fadeIn","rest","X-WP-Nonce","nonce","X-STTV-Auth","btoa","sttv_user","value","sttv_pass","code","empty","html","hide","setTimeout","window","location","href","redirect","responseJSON","msg","errors","too_many_retries","message","fadeOut","console","log","document","ready","material_select","post","d","submitter","form","closest","token","whichForm","formSer","serialize","formData","action","postForm","ajaxURL","beforeSubmit","formSuccess","name","replace","sent","subscribed","class","appendTo","attr","prop","formFail","sa","fdata"],"mappings":"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","file":"sttv-js.min.js","sourcesContent":["// Closer function\nvar closerFunc = function(callback) {\n\tjQuery('body').removeClass('nav-sidebar-open login-sidebar-open');\n\tif (typeof callback == 'undefined') {callback = function(){return true;}}\n\tcallback();\n};\n\n( function ( $ ) { //begin wrapper\n\t\"use strict\";\n\nvar _st = {\n\trequest : function(obj) {\n\t\tvar ajaxp = {\n\t\t\turl: obj.route || '',\n\t\t\tmethod: obj.method || 'GET',\n\t\t\theaders: obj.headers || {},\n\t\t\tprocessData : false,\n\t\t\tdataType : obj.dataType || 'json',\n\t\t\tsuccess: function(data){\n\t\t\t\ttypeof obj.success !== 'undefined' && obj.success(data);\n\t\t\t},\n\t\t\terror: function(x,s,r){\n\t\t\t\ttypeof obj.error !== 'undefined' && obj.error([x,s,r]);\n\t\t\t}\n\t\t}\n\t\tif (ajaxp.method !== 'GET') {\n\t\t\tajaxp['data'] = JSON.stringify(obj.cdata || {})\n\t\t}\n\t\t$.ajax(ajaxp)\n\t}\n}\n\n// Opener functions\n\n$('#main-menu').click(function(e) {\n\te.preventDefault();\n\tif ( $(this).is( \"#login\" )) {\n\t\t$('body').addClass('login-sidebar-open');\n\t} else {\n\t\t$('body').addClass('nav-sidebar-open');\n\t}\n});\n\n$('#acctmodal, .close').on('click touchstart',function(e) {\n\te.preventDefault();\n\tcloserFunc();\n});\n$('.read-more').on('click touchstart',function(e) {\n\te.preventDefault();\n\t$(this).parent().css({'display':'none'});\n\t$('#content-wrapper').css({'max-height':'none'});\n});\n\t\nvar thenav = $('body.nav-sidebar-open #main-nav');\nthenav.on('click touchstart',function(e) {\n\tif (e.offsetX > thenav.offsetWidth) {\n\t\talert('Clicked!');\n\t\te.preventDefault();\n\t\tcloserFunc();\n\t}\n});\n\n$('li.menu-item-has-children>a').click(function(e) {\n\te.preventDefault();\n\t$(this).siblings('ul.sub-menu').toggleClass('active').promise().done(function(){\n\t\t$('ul.sub-menu').not(this).removeClass('active');\n\t});\n});\n\n$('form#sttv_login_form').on('submit',function(e) {\n\te.preventDefault();\n\tif (0 === $('#sttv_user').val().length){\n\t\t$('.message').html('Username is required')\n\t\treturn;\n\t}\n\n\tvar loader = '<img src=\"'+stajax.contentURL+'/i/sttv-spinner.gif\" alt=\"Loading...\" />',\n\t\tld = $('.loading_overlay');\n\tld.append(loader).promise().done(function(){\n\t\t$(this).fadeIn(250);\n\t});\n\n\t_st.request({\n\t\troute : stajax.rest.url+'/auth?action=login',\n\t\tmethod : 'POST',\n\t\theaders : {\n\t\t\t'X-WP-Nonce' : stajax.rest.nonce,\n\t\t\t'X-STTV-Auth' : btoa(this.sttv_user.value+':'+this.sttv_pass.value)\n\t\t},\n\t\tsuccess : function(data) {\n\t\t\tif ( data.code == 'login_success' ) {\n\t\t\t\tld.empty().html('<p class=\"sblock\"><strong><i class=\"material-icons\">done</i></strong></p>').fadeIn(250)\n\t\t\t\t$('.sblock').hide().fadeIn(250)\n\t\t\t\tsetTimeout(function(){\n\t\t\t\t\twindow.location.href = data.redirect\n\t\t\t\t},250);\n\t\t\t}\n\t\t},\n\t\terror : function(x) {\n\t\t\tvar data = x[0].responseJSON,\n\t\t\t\tmsg = ( typeof data.errors.too_many_retries !== 'undefined') ? data.errors.too_many_retries[0] : data.message;\n\n\t\t\t$('.message').html(msg)\n\t\t\tld.fadeOut(250)\n\t\t\tconsole.log(data)\n\t\t}\n\t})\n});\n\n} ( jQuery ) ); //end wrapper","( function ( $ ) { //begin wrapper\n\t\"use strict\";\n\t\n\t\n\t$(document).ready(function() {\n    \t$('select').material_select();\n\t  });\n\t  \n\t$('#logout-btn a').click(function(e){\n\t\te.preventDefault()\n\t\t$.post(stajax.rest.url+'/auth?action=logout',function(d){\n\t\t\twindow.location.href = d\n\t\t});\n\t})\n  \n  } ( jQuery ) ); //end wrapper","$('.suitter').click(function(e) {\n\t\te.preventDefault();\n\t\t\n\t\tvar submitter = {\n\t\t\t\tform : $(this).closest('form'),\n\t\t\t\ttoken : $('.g-recaptcha-response',this.form).val(),\n\t\t\t\twhichForm : $('input[name=\"whichform\"]',this.form).val()\n\t\t\t};\n\t\t//console.log(submitter.form.attr('id'));\n\t\tsubmitter.formSer = submitter.form.serialize();\n\t\tsubmitter.formData = {\n\t\t\taction : 'sttvsubmitter',\n\t\t\tvalue : submitter.formSer\n\t\t};\n\t\tsubmitter.action = {\n\t\t\tld : $('.loading_overlay',submitter.form.parent()),\n\t\t\tpostForm : function() {\n\t\t\t\t//var parentThis = this;\n\t\t\t\treturn $.post(\n\t\t\t\t\tstajax.ajaxURL, \n\t\t\t\t\tsubmitter.formData,\n\t\t\t\t\tfunction(data){\n\t\t\t\t\t\t//console.log(data);\n\t\t\t\t},'json');\n\t\t\t},\n\t\t\tbeforeSubmit : function() {\n\t\t\t\tvar loader = '<img src=\"'+stajax.contentURL+'/i/sttv-spinner.gif\" alt=\"Loading...\" />';\n\t\t\t\t\n\t\t\t\tthis.ld.html(loader).promise().done(function(){\n\t\t\t\t\t$(this).fadeIn(500);\n\t\t\t\t});\n\t\t\t},\n\t\t\tformSuccess : function(data) {\n\t\t\t\tvar d = data.data;\n\t\t\t\tthis.ld.empty().html('<p class=\"sblock\"><i class=\"material-icons\">done</i></p>').fadeIn(500);\n\t\t\t\tif (d.name) {\n\t\t\t\t\t$('.sblock',this.ld).hide().fadeIn(500,function() {\n\t\t\t\t\t\twindow.location.replace('/my-account');\n\t\t\t\t\t\t\t//$('#login .link-text').html(d.name);\n\t\t\t\t\t});\n\t\t\t\t} else if (d.sent || d.subscribed) {\n\t\t\t\t\tvar s = $('.sblock',this.ld);\n\t\t\t\t\tvar p = $('<p/>',{\"class\":\"smessage\"});\n\t\t\t\t\tp.appendTo(s).append(d.message);\n\t\t\t\t\t\n\t\t\t\t\t$(\"#\"+submitter.form.attr('id')+\" :input\").prop(\"disabled\",true);\n\t\t\t\t} else {\n\t\t\t\t\talert(\"Something went wrong. Please reload the page.\");\n\t\t\t\t}\n\t\t\t},\n\t\t\tformFail : function(data) {\n\t\t\t\tthis.ld.fadeOut(500);\n\t\t\t\t$('p.message',submitter.form).html(data.data.message).css('display','block');\n\t\t\t}\n\t\t};\n\t\tvar sa = submitter.action;\n\t\t\n\t\t/** Let's check the recaptcha response, IF it exists **/\n\t\tif (submitter.token != null && submitter.token.length === 0) {\n\t\t\talert('Please prove you\\'re not a robot!');\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tsa.beforeSubmit(); /** Loading/Processing overlay **/\n\t\t\n\t\tsa.postForm().done(function(fdata) { //submit the form\n\t\t\t//console.log(fdata);\n\t\t\treturn (fdata.success) ? sa.formSuccess(fdata) : sa.formFail(fdata);\n\t\t});\n\t});"]}