{"version":3,"sources":["modules/base/_sss.js","modules/sttv-material.js"],"names":["_st","request","obj","ajaxp","url","route","method","headers","processData","dataType","success","data","error","x","s","r","JSON","stringify","cdata","accepts","$","ajax","menu","cb","toggleClass","closer","jQuery","removeClass","heartBeat","stajax","rootURL","d","Exception","document","dequeue","queue","length","e","console","log","Materialize","toast","login","el","rest","X-WP-Nonce","nonce","append","modal","loader","each","i","this","attr","contentURL","action","element","init","act","toggle","empty","mu","submit","cart","type","cartObj","parse","localStorage","getItem","initDate","Date","now","ID","signature","btoa","navigator","userAgent","platform","product","replace","items","key","currentCount","Object","keys","fabWrap","id","fab","class","fabCon","text","fabAlert","addClass","appendTo","body","siblings","setItem","add","item","skipUpdate","msg","qty","save","remove","skip","notifications","update","get","count","checkout","formValid","disableForm","c","prop","validate","con","k","v","is","val","hasClass","mukey","email","license","title","t","html","responseJSON","message","fn","on","preventDefault","f","modal-toggle","slide-bar","read-more","parent","css","display","max-height","mu-submitter","cart-fab","split","some","thenav","offsetX","offsetWidth","alert","click","promise","done","not","ld","fadeIn","X-STTV-Auth","sttv_user","value","sttv_pass","code","hide","setTimeout","window","location","href","redirect","errors","too_many_retries","fadeOut","loading","g_recaptcha_response","grecaptcha","getResponse","sttv_contact_name","sttv_contact_email","sttv_contact_subject","sttv_contact_message","sent","form","fields","fname","lname","reset","ready","material_select"],"mappings":"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","file":"sttv-js.min.js","sourcesContent":["/*\n * \n * MAIN SITE OBJECT\n * \n */\nvar _st = {\n\trequest : function(obj) {\n\t\tvar ajaxp = {\n\t\t\turl: obj.route || '',\n\t\t\tmethod: obj.method || 'GET',\n\t\t\theaders: obj.headers || {},\n\t\t\tprocessData : false,\n\t\t\tdataType : obj.dataType || 'json',\n\t\t\tsuccess: function(data){\n\t\t\t\ttypeof obj.success !== 'undefined' && obj.success(data);\n\t\t\t},\n\t\t\terror: function(x,s,r){\n\t\t\t\ttypeof obj.error !== 'undefined' && obj.error([x,s,r]);\n\t\t\t}\n\t\t}\n\t\tif (ajaxp.method !== 'GET') {\n\t\t\tajaxp['data'] = JSON.stringify(obj.cdata || {})\n\t\t}\n\t\tif (typeof obj.accepts !== 'undefined'){\n\t\t\tajaxp['accepts'] = obj.accepts\n\t\t}\n\t\t$.ajax(ajaxp)\n\t},\n\tmenu : function(cb) {\n\t\t$('body').toggleClass('nav-sidebar-open')\n\t\ttypeof cb === 'function' && cb();\n\t},\n\tcloser : function(cb) {\n\t\tjQuery('body').removeClass('nav-sidebar-open login-sidebar-open');\n\t\ttypeof cb === 'function' && cb();\n\t},\n\theartBeat : function() {\n\t\t_st.request({\n\t\t\troute : stajax.rootURL+\"/ping.php\",\n\t\t\tsuccess : function(d){\n\t\t\t\ttry {\n\t\t\t\t\tif (!d) {\n\t\t\t\t\t\tthrow new Exception('Invalid response from _st.heartBeat.');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdo {\n\t\t\t\t\t\t\t$(document).dequeue('heartbeat')\n\t\t\t\t\t\t} while ($(document).queue('heartbeat').length)\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.log(e);\n\t\t\t\t}\n\t\t\t},\n\t\t\terror : function(x,s,r){\n\t\t\t\tMaterialize.toast('Offline', 6000);\n\t\t\t\tconsole.log(x,s,r);\n\t\t\t}\n\t\t});\n\t},\n\tlogin : function(el) {\n\t\t_st.request({\n\t\t\troute : stajax.rest.url+'/auth',\n\t\t\theaders : {\n\t\t\t\t'X-WP-Nonce' : stajax.rest.nonce,\n\t\t\t},\n\t\t\tsuccess : function(d) {\n\t\t\t\tel.append(d)\n\t\t\t\t_st.modal.loader()\n\t\t\t},\n\t\t\terror : function(x) {\n\t\t\t\tconsole.log(x)\n\t\t\t}\n\t\t})\n\t},\n\tmodal : (function() {\n\t\t$('.loading-spinner').each(function(i){\n\t\t\t$(this).attr('src',stajax.contentURL+'/i/sttv-spinner.gif')\n\t\t})\n\t\treturn {\n\t\t\taction : '',\n\t\t\telement : $('.sttvmodal_inner'),\n\t\t\tinit : function(act){\n\t\t\t\tif (typeof act === 'undefined'){\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tif (this.action === act) {\n\t\t\t\t\treturn this.toggle()\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tvar cb;\n\t\t\t\tif (act !== 'close') {\n\t\t\t\t\tthis.action = act\n\t\t\t\t\t_st.modal.loader(function() {\n\t\t\t\t\t\t_st.modal.element.empty()\n\t\t\t\t\t})\n\t\t\t\t}\n\t\n\t\t\t\tswitch (act) {\n\t\t\t\t\tcase 'close':\n\t\t\t\t\t\tbreak\n\t\t\t\t\tcase 'login':\n\t\t\t\t\t\tcb = function(el) {\n\t\t\t\t\t\t\t_st.login(el)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak\n\t\t\t\t\tcase 'account':\n\t\t\t\t\t\tcb = function(el) {\n\t\t\t\t\t\t\t//el.empty()\n\t\t\t\t\t\t\tel.append('account template')\n\t\t\t\t\t\t\t_st.modal.loader()\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak\n\t\t\t\t\tcase 'mu-checkout':\n\t\t\t\t\t\tcb = function(el) {\n\t\t\t\t\t\t\t_st.mu.submit(el,'#mu_form_wrapper')\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak\n\t\t\t\t\tcase 'checkout':\n\t\t\t\t\t\tbreak\n\t\t\t\t}\n\t\t\t\tthis.toggle(cb)\n\t\t\t},\n\t\t\ttoggle : function(cb) {\n\t\t\t\t$('body').toggleClass('modal-open')\n\t\t\t\ttypeof cb === 'function' && cb(_st.modal.element)\n\t\t\t},\n\t\t\tloader : function(cb) {\n\t\t\t\t$('#sttvmodal').toggleClass('loader-active')\n\t\t\t\ttypeof cb === 'function' && cb(_st.modal.element)\n\t\t\t}\n\t\t}\n\t})(),\n\tcart : (function(){\n\t\tif ( stajax.type === 'courses' ) {\n\t\t\treturn false\n\t\t}\n\t\tvar cartObj = JSON.parse(localStorage.getItem('_stcart_'))\n\t\tvar initDate = Date.now()\n\t\tif ( cartObj === null || (cartObj.ID / 1000 | 0) + (30) < initDate / 1000 | 0 ) {\n\t\t\tcartObj = {\n\t\t\t\tID : initDate,\n\t\t\t\tsignature : btoa(navigator.userAgent+'|'+navigator.platform+'|'+navigator.product).replace(/=/g,''),\n\t\t\t\titems : {}\n\t\t\t}\n\t\t}\n\n\t\tfor ( var key in cartObj.items ) {\n\t\t\tvar obj = cartObj.items[key]\n\t\t\tif ( obj.type === 'multi-user' ) {\n\t\t\t\tdelete cartObj.items[key]\n\t\t\t}\n\t\t}\n\n\t\tvar currentCount = Object.keys(cartObj.items).length\n\t\n\t\tvar fabWrap = $('<div/>',{id:'cart-FAB'}),\n\t\t\tfab = $('<a/>',{\"class\":'cart-fab btn-floating btn-large z-depth-5'}),\n\t\t\tfabCon = $('<i/>',{\"class\":'material-icons',text:'shopping_cart'}),\n\t\t\tfabAlert = $('<div/>',{\"class\":'cart-alert circle z-depth-2'})\n\t\n\t\t$('body').addClass('sttv-jscart')\n\t\n\t\tfabWrap.append(\n\t\t\tfabAlert.text(currentCount)\n\t\t).append(\n\t\t\tfab.append(fabCon)\n\t\t).appendTo(document.body)\n\n\t\tif ( currentCount > 0 ) {\n\t\t\tfabAlert.addClass('show').siblings('.cart-fab').addClass('pulse')\n\t\t}\n\n\t\tlocalStorage.setItem('_stcart_',JSON.stringify(cartObj))\n\t\n\t\treturn {\n\t\t\tcartObj : cartObj,\n\t\t\tadd : function add(item,skipUpdate) {\n\t\t\t\tskipUpdate = skipUpdate || false\n\t\t\t\tif ( typeof item !== 'object' ) {\n\t\t\t\t\treturn false\n\t\t\t\t}\n\t\t\t\tvar cart = this.cartObj.items,\n\t\t\t\t\tmsg = ''\n\t\n\t\t\t\tif ( typeof cart[item.id] === 'undefined' ) {\n\t\t\t\t\tcart[item.id] = item\n\t\t\t\t\tmsg = 'Item added'\n\t\t\t\t} else {\n\t\t\t\t\tcart[item.id].qty += item.qty\n\t\t\t\t\tmsg = 'Quantity updated'\n\t\t\t\t}\n\t\n\t\t\t\tthis.save(skipUpdate)\n\t\t\t\treturn msg\n\t\t\t},\n\t\t\tremove : function(item,skipUpdate) {\n\t\t\t\tskipUpdate = skipUpdate || false\n\t\t\t\tif (typeof item !== 'string' ){\n\t\t\t\t\treturn false\n\t\t\t\t}\n\t\t\t\tdelete this.cartObj.items[item]\n\t\t\t\treturn this.save(skipUpdate)\n\t\t\t},\n\t\t\tempty : function(cb) {\n\t\t\t\tthis.cartObj.items = {}\n\t\t\t\tthis.save()\n\t\t\t\treturn typeof cb === 'function' && cb(this)\n\t\t\t},\n\t\t\tsave : function(skip) {\n\t\t\t\tlocalStorage.setItem('_stcart_',JSON.stringify(this.cartObj))\n\t\t\t\treturn !skip && this.notifications.update()\n\t\t\t},\n\t\t\tget : function() {\n\t\t\t\treturn this.cartObj.items\n\t\t\t},\n\t\t\tnotifications : {\n\t\t\t\tcount : currentCount,\n\t\t\t\telement : fabAlert,\n\t\t\t\tupdate : function() {\n\t\t\t\t\tthis.count = Object.keys(_st.cart.cartObj.items).length\n\t\t\t\t\tif ( this.count <= 0 ) {\n\t\t\t\t\t\t$('.cart-alert').removeClass('show').siblings('.cart-fab').removeClass('pulse')\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$('.cart-alert').addClass('show').siblings('.cart-fab').addClass('pulse')\n\t\t\t\t\t}\n\t\t\t\t\t$('.cart-alert').text(this.count)\n\t\t\t\t\treturn this.count\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t})(),\n\tcheckout : '',\n\tmu : {\n\t\tformValid : false,\n\t\tdisableForm : function(c) {\n\t\t\t$('.signup-submit',c).prop('disabled',!this.formValid)\n\t\t},\n\t\tvalidate : function(el,con) {\n\t\t\tvar inputs = $('input,select',con)\n\t\t\tinputs.each(function(k,v){\n\t\t\t\tif ( $(this).is(':required') && ( ( $(this).val() && !$(this).hasClass('invalid') ) || $(this).hasClass('valid') ) ) {\n\t\t\t\t\t_st.mu.formValid = true\n\t\t\t\t} else {\n\t\t\t\t\t_st.mu.formValid = false\n\t\t\t\t\t_st.mu.disableForm(con)\n\t\t\t\t\treturn false\n\t\t\t\t}\n\t\t\t})\n\t\t\t_st.mu.disableForm(con)\n\t\t},\n\t\tsubmit : function(el,con) {\n\t\t\tvar data = {\n\t\t\t\tmukey : $('input[name=mukey]',con).val(),\n\t\t\t\temail : $('input[name=email]',con).val(),\n\t\t\t\tlicense : {\n\t\t\t\t\tid : $('select[name=sttv_course_id]',con).val(),\n\t\t\t\t\ttitle : $('select[name=sttv_course_id] option:selected',con).text(),\n\t\t\t\t\tqty : $('select[name=qty]',con).val()\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t_st.request({\n\t\t\t\troute : stajax.rest.url+'/multi-user',\n\t\t\t\tmethod : 'POST',\n\t\t\t\tcdata : data,\n\t\t\t\theaders : {\n\t\t\t\t\t'X-WP-Nonce' : stajax.rest.nonce,\n\t\t\t\t},\n\t\t\t\tsuccess : function(d) {\n\t\t\t\t\t_st.checkout = 'multi-user'\n\t\t\t\t\t_st.cart.empty(function(t) {\n\t\t\t\t\t\tt.add(d.data,true)\n\t\t\t\t\t})\n\t\t\t\t\tel.append(d.html)\n\t\t\t\t\t_st.modal.loader()\n\t\t\t\t\tconsole.log(d)\n\t\t\t\t},\n\t\t\t\terror : function(x) {\n\t\t\t\t\tvar d = x[0].responseJSON\n\n\t\t\t\t\t$('.message',con).text(d.message)\n\t\t\t\t\t_st.modal.toggle(function() {\n\t\t\t\t\t\t_st.modal.loader()\n\t\t\t\t\t})\n\t\t\t\t\tconsole.log(d)\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t},\n\tfn : function() {}\n};\n\n\n/*\n * \n * EVENT HANDLERS\n * \n */\n( function ( $ ) { //begin wrapper\n\t\"use strict\";\n\n// Opener functions\n\n$('input, select','#mu_form_wrapper').on('change',function(e){\n\t_st.mu.validate(this,'#mu_form_wrapper')\n\t_st.modal.action = ''\n})\n\nvar selectors = '.slide-bar, .modal-toggle, .read-more, .mu-submitter, .cart-fab'\n$(document).on('click touchstart',selectors,function(e) {\n\te.preventDefault();\n\tvar t = $(this);\n\t//var s = e.handleObj.selector.split(/,\\s+/);\n\tvar c = t.attr('class').split(/\\s+/);\n\n\tvar f = {\n\t\t'modal-toggle' : function() {\n\t\t\t_st.modal.init(t.attr('data-action'));\n\t\t},\n\t\t'slide-bar' : function() {\n\t\t\t_st.menu()\n\t\t},\n\t\t'read-more' : function() {\n\t\t\tt.parent().css({'display':'none'});\n\t\t\t$('#content-wrapper').css({'max-height':'none'});\n\t\t},\n\t\t'mu-submitter' : function() {\n\t\t\t_st.modal.init('mu-checkout')\n\t\t},\n\t\t'cart-fab' : function() {\n\n\t\t}\n\t}\n\n\tc.some(function(v){typeof f[v] !== 'undefined' && f[v]()});\n});\n\t\nvar thenav = $('body.nav-sidebar-open #main-nav');\nthenav.on('click touchstart',function(e) {\n\tif (e.offsetX > thenav.offsetWidth) {\n\t\talert('Clicked!');\n\t\te.preventDefault();\n\t\t_st.closer();\n\t}\n});\n\n$('li.menu-item-has-children>a').click(function(e) {\n\te.preventDefault();\n\t$(this).siblings('ul.sub-menu').toggleClass('active').promise().done(function(){\n\t\t$('ul.sub-menu').not(this).removeClass('active');\n\t});\n});\n\n$(document).on('submit','form#sttv_login_form',function(e) {\n\te.preventDefault();\n\tif (0 === $('#sttv_user').val().length){\n\t\t$('.message').html('Username is required')\n\t\treturn;\n\t}\n\n\tvar loader = '<img src=\"'+stajax.contentURL+'/i/sttv-spinner.gif\" alt=\"Loading...\" />',\n\t\tld = $('.loading_overlay');\n\tld.append(loader).promise().done(function(){\n\t\t$(this).fadeIn(250);\n\t});\n\n\t_st.request({\n\t\troute : stajax.rest.url+'/auth?action=login',\n\t\tmethod : 'POST',\n\t\theaders : {\n\t\t\t'X-WP-Nonce' : stajax.rest.nonce,\n\t\t\t'X-STTV-Auth' : btoa(this.sttv_user.value+':'+this.sttv_pass.value)\n\t\t},\n\t\tsuccess : function(data) {\n\t\t\tif ( data.code == 'login_success' ) {\n\t\t\t\tld.empty().html('<p class=\"sblock\"><strong><i class=\"material-icons\">done</i></strong></p>').fadeIn(250)\n\t\t\t\t$('.sblock').hide().fadeIn(250)\n\t\t\t\tsetTimeout(function(){\n\t\t\t\t\twindow.location.href = data.redirect\n\t\t\t\t},250);\n\t\t\t}\n\t\t},\n\t\terror : function(x) {\n\t\t\tvar data = x[0].responseJSON,\n\t\t\t\tmsg = ( typeof data.errors.too_many_retries !== 'undefined') ? data.errors.too_many_retries[0] : data.message;\n\n\t\t\t$('.message').html(msg)\n\t\t\tld.fadeOut(250)\n\t\t\tconsole.log(data)\n\t\t}\n\t})\n});\n\n$('form#sttv_contact').on('submit',function(e) {\n\te.preventDefault();\n\tvar loading = $('.loading_overlay',$(this).parent()).html('<img src=\"'+stajax.contentURL+'/i/sttv-spinner.gif\" alt=\"Loading...\" />')\n\n\tloading.fadeIn(250)\n\n\t_st.request({\n\t\troute : stajax.rest.url+'/contact',\n\t\tmethod : 'POST',\n\t\theaders : {\n\t\t\t'X-WP-Nonce' : stajax.rest.nonce\n\t\t},\n\t\tcdata : {\n\t\t\tg_recaptcha_response : grecaptcha.getResponse(),\n\t\t\tsttv_contact_name: this.sttv_contact_name.value,\n\t\t\tsttv_contact_email: this.sttv_contact_email.value,\n\t\t\tsttv_contact_subject: this.sttv_contact_subject.value,\n\t\t\tsttv_contact_message: this.sttv_contact_message.value\n\t\t},\n\t\tsuccess : function(data) {\n\t\t\tconsole.log(data)\n\t\t\tif ( data.sent ) {\n\t\t\t\tloading.empty().html('<p class=\"sblock\"><strong><i class=\"material-icons\">done</i></strong></p>').fadeIn(250)\n\t\t\t\tvar s = $('.sblock');\n\t\t\t\tvar p = $('<p/>',{\"class\":\"smessage\"});\n\t\t\t\tp.appendTo(s).append(data.message);\n\t\t\t\t$('.sblock').hide().fadeIn(250)\n\t\t\t} else {\n\t\t\t\t$('.message').html(data.message)\n\t\t\t\tloading.fadeOut(250)\n\t\t\t}\n\t\t},\n\t\terror : function(x) {\n\t\t\t$('.message').html('Something went wrong. Please refresh the page and try again.')\n\t\t\tloading.fadeOut(250)\n\t\t\tconsole.log(x)\n\t\t}\n\t})\n\t\n  });\n\n\t$('#subscribe_page_mc').on('submit',function(e){\n\t\te.preventDefault();\n\t\tvar form = $(this)\n\n\t\tvar loading = $('.loading_overlay',$(this).parent()).html('<img src=\"'+stajax.contentURL+'/i/sttv-spinner.gif\" alt=\"Loading...\" />')\n\n\t\tloading.fadeIn(250)\n\n\t\tvar fields = {\n\t\t\tfname : $('#sttv_mc_fname',form).val(),\n\t\t\tlname : $('#sttv_mc_lname',form).val(),\n\t\t\temail : $('#sttv_mc_email',form).val(),\n\t\t\tg_recaptcha_response : grecaptcha.getResponse()\n\t\t}\n\t\t\n\t\t_st.request({\n\t\t\troute : stajax.rest.url+'/subscribe',\n\t\t\tmethod : 'POST',\n\t\t\tcdata : fields,\n\t\t\theaders : {'X-WP-Nonce' : stajax.rest.nonce},\n\t\t\tsuccess : function(d){\n\t\t\t\t$('input, button',form).prop('disabled',true)\n\t\t\t\tgrecaptcha.reset()\n\t\t\t\tloading.empty().html('<p class=\"sblock\"><strong><i class=\"material-icons\">done</i></strong></p>').fadeIn(250)\n\t\t\t\tvar s = $('.sblock');\n\t\t\t\tvar p = $('<p/>',{\"class\":\"smessage\"});\n\t\t\t\tp.appendTo(s).append(d.message);\n\t\t\t\t$('.sblock').hide().fadeIn(250)\n\t\t\t\tconsole.log(d)\n\t\t\t},\n\t\t\terror : function(x){\n\t\t\t\t$('.message',form).html('Something went wrong. Please refresh the page and try again.')\n\t\t\t\tloading.fadeOut(250)\n\t\t\t\tconsole.log(x)\n\t\t\t}\n\t\t})\n\t});\n\n} ( jQuery ) ); //end wrapper","( function ( $ ) { //begin wrapper\n\t\"use strict\";\n\t\n\t$(document).ready(function() {\n    \t$('select').material_select();\n\t  });\n  \n  } ( jQuery ) ); //end wrapper"]}