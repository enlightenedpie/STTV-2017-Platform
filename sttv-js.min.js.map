{"version":3,"sources":["modules/base/_sss.js","modules/sttv-material.js"],"names":["_st","request","obj","ajaxp","url","route","method","headers","processData","dataType","success","data","error","x","s","r","JSON","stringify","cdata","accepts","$","ajax","closer","cb","jQuery","removeClass","heartBeat","stajax","rootURL","d","Exception","document","dequeue","queue","length","e","console","log","Materialize","toast","fn","click","preventDefault","this","is","addClass","on","parent","css","display","max-height","thenav","offsetX","offsetWidth","alert","siblings","toggleClass","promise","done","not","val","loader","contentURL","ld","append","fadeIn","rest","X-WP-Nonce","nonce","X-STTV-Auth","btoa","sttv_user","value","sttv_pass","code","empty","html","hide","setTimeout","window","location","href","redirect","responseJSON","msg","errors","too_many_retries","message","fadeOut","loading","g_recaptcha_response","grecaptcha","getResponse","sttv_contact_name","sttv_contact_email","sttv_contact_subject","sttv_contact_message","sent","class","appendTo","form","fields","fname","lname","email","prop","reset","ready","material_select"],"mappings":"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","file":"sttv-js.min.js","sourcesContent":["var _st = {\n\trequest : function(obj) {\n\t\tvar ajaxp = {\n\t\t\turl: obj.route || '',\n\t\t\tmethod: obj.method || 'GET',\n\t\t\theaders: obj.headers || {},\n\t\t\tprocessData : false,\n\t\t\tdataType : obj.dataType || 'json',\n\t\t\tsuccess: function(data){\n\t\t\t\ttypeof obj.success !== 'undefined' && obj.success(data);\n\t\t\t},\n\t\t\terror: function(x,s,r){\n\t\t\t\ttypeof obj.error !== 'undefined' && obj.error([x,s,r]);\n\t\t\t}\n\t\t}\n\t\tif (ajaxp.method !== 'GET') {\n\t\t\tajaxp['data'] = JSON.stringify(obj.cdata || {})\n\t\t}\n\t\tif (typeof obj.accepts !== 'undefined'){\n\t\t\tajaxp['accepts'] = obj.accepts\n\t\t}\n\t\t$.ajax(ajaxp)\n\t},\n\tcloser : function(cb) {\n\t\tjQuery('body').removeClass('nav-sidebar-open login-sidebar-open');\n\t\ttypeof cb === 'function' && cb();\n\t},\n\theartBeat : function() {\n\t\t_st.request({\n\t\t\troute : stajax.rootURL+\"/ping.php\",\n\t\t\tsuccess : function(d){\n\t\t\t\ttry {\n\t\t\t\t\tif (!d) {\n\t\t\t\t\t\tthrow new Exception('Invalid response from _st.heartBeat.');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdo {\n\t\t\t\t\t\t\t$(document).dequeue('heartbeat')\n\t\t\t\t\t\t} while ($(document).queue('heartbeat').length)\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.log(e);\n\t\t\t\t}\n\t\t\t},\n\t\t\terror : function(x,s,r){\n\t\t\t\tMaterialize.toast('Offline', 6000);\n\t\t\t\tconsole.log(x,s,r);\n\t\t\t}\n\t\t});\n\t},\n\tfn : function() {}\n};\n\n( function ( $ ) { //begin wrapper\n\t\"use strict\";\n\n// Opener functions\n\n$('#main-menu').click(function(e) {\n\te.preventDefault();\n\tif ( $(this).is( \"#login\" )) {\n\t\t$('body').addClass('login-sidebar-open');\n\t} else {\n\t\t$('body').addClass('nav-sidebar-open');\n\t}\n});\n\n$('#acctmodal, .close').on('click touchstart',function(e) {\n\te.preventDefault();\n\t_st.closer();\n});\n$('.read-more').on('click touchstart',function(e) {\n\te.preventDefault();\n\t$(this).parent().css({'display':'none'});\n\t$('#content-wrapper').css({'max-height':'none'});\n});\n\t\nvar thenav = $('body.nav-sidebar-open #main-nav');\nthenav.on('click touchstart',function(e) {\n\tif (e.offsetX > thenav.offsetWidth) {\n\t\talert('Clicked!');\n\t\te.preventDefault();\n\t\t_st.closer();\n\t}\n});\n\n$('li.menu-item-has-children>a').click(function(e) {\n\te.preventDefault();\n\t$(this).siblings('ul.sub-menu').toggleClass('active').promise().done(function(){\n\t\t$('ul.sub-menu').not(this).removeClass('active');\n\t});\n});\n\n$('form#sttv_login_form').on('submit',function(e) {\n\te.preventDefault();\n\tif (0 === $('#sttv_user').val().length){\n\t\t$('.message').html('Username is required')\n\t\treturn;\n\t}\n\n\tvar loader = '<img src=\"'+stajax.contentURL+'/i/sttv-spinner.gif\" alt=\"Loading...\" />',\n\t\tld = $('.loading_overlay');\n\tld.append(loader).promise().done(function(){\n\t\t$(this).fadeIn(250);\n\t});\n\n\t_st.request({\n\t\troute : stajax.rest.url+'/auth?action=login',\n\t\tmethod : 'POST',\n\t\theaders : {\n\t\t\t'X-WP-Nonce' : stajax.rest.nonce,\n\t\t\t'X-STTV-Auth' : btoa(this.sttv_user.value+':'+this.sttv_pass.value)\n\t\t},\n\t\tsuccess : function(data) {\n\t\t\tif ( data.code == 'login_success' ) {\n\t\t\t\tld.empty().html('<p class=\"sblock\"><strong><i class=\"material-icons\">done</i></strong></p>').fadeIn(250)\n\t\t\t\t$('.sblock').hide().fadeIn(250)\n\t\t\t\tsetTimeout(function(){\n\t\t\t\t\twindow.location.href = data.redirect\n\t\t\t\t},250);\n\t\t\t}\n\t\t},\n\t\terror : function(x) {\n\t\t\tvar data = x[0].responseJSON,\n\t\t\t\tmsg = ( typeof data.errors.too_many_retries !== 'undefined') ? data.errors.too_many_retries[0] : data.message;\n\n\t\t\t$('.message').html(msg)\n\t\t\tld.fadeOut(250)\n\t\t\tconsole.log(data)\n\t\t}\n\t})\n});\n\n$('form#sttv_contact').on('submit',function(e) {\n\te.preventDefault();\n\tvar loading = $('.loading_overlay',$(this).parent()).html('<img src=\"'+stajax.contentURL+'/i/sttv-spinner.gif\" alt=\"Loading...\" />')\n\n\tloading.fadeIn(250)\n\n\t_st.request({\n\t\troute : stajax.rest.url+'/contact',\n\t\tmethod : 'POST',\n\t\theaders : {\n\t\t\t'X-WP-Nonce' : stajax.rest.nonce\n\t\t},\n\t\tcdata : {\n\t\t\tg_recaptcha_response : grecaptcha.getResponse(),\n\t\t\tsttv_contact_name: this.sttv_contact_name.value,\n\t\t\tsttv_contact_email: this.sttv_contact_email.value,\n\t\t\tsttv_contact_subject: this.sttv_contact_subject.value,\n\t\t\tsttv_contact_message: this.sttv_contact_message.value\n\t\t},\n\t\tsuccess : function(data) {\n\t\t\tconsole.log(data)\n\t\t\tif ( data.sent ) {\n\t\t\t\tloading.empty().html('<p class=\"sblock\"><strong><i class=\"material-icons\">done</i></strong></p>').fadeIn(250)\n\t\t\t\tvar s = $('.sblock');\n\t\t\t\tvar p = $('<p/>',{\"class\":\"smessage\"});\n\t\t\t\tp.appendTo(s).append(data.message);\n\t\t\t\t$('.sblock').hide().fadeIn(250)\n\t\t\t} else {\n\t\t\t\t$('.message').html(data.message)\n\t\t\t\tloading.fadeOut(250)\n\t\t\t}\n\t\t},\n\t\terror : function(x) {\n\t\t\t$('.message').html('Something went wrong. Please refresh the page and try again.')\n\t\t\tloading.fadeOut(250)\n\t\t\tconsole.log(x)\n\t\t}\n\t})\n\t\n  });\n\n\t$('#subscribe_page_mc').on('submit',function(e){\n\t\te.preventDefault();\n\t\tvar form = $(this)\n\n\t\tvar loading = $('.loading_overlay',$(this).parent()).html('<img src=\"'+stajax.contentURL+'/i/sttv-spinner.gif\" alt=\"Loading...\" />')\n\n\t\tloading.fadeIn(250)\n\n\t\tvar fields = {\n\t\t\tfname : $('#sttv_mc_fname',form).val(),\n\t\t\tlname : $('#sttv_mc_lname',form).val(),\n\t\t\temail : $('#sttv_mc_email',form).val(),\n\t\t\tg_recaptcha_response : grecaptcha.getResponse()\n\t\t}\n\t\t\n\t\t_st.request({\n\t\t\troute : stajax.rest.url+'/subscribe',\n\t\t\tmethod : 'POST',\n\t\t\tcdata : fields,\n\t\t\theaders : {'X-WP-Nonce' : stajax.rest.nonce},\n\t\t\tsuccess : function(d){\n\t\t\t\t$('input, button',form).prop('disabled',true)\n\t\t\t\tgrecaptcha.reset()\n\t\t\t\tloading.empty().html('<p class=\"sblock\"><strong><i class=\"material-icons\">done</i></strong></p>').fadeIn(250)\n\t\t\t\tvar s = $('.sblock');\n\t\t\t\tvar p = $('<p/>',{\"class\":\"smessage\"});\n\t\t\t\tp.appendTo(s).append(d.message);\n\t\t\t\t$('.sblock').hide().fadeIn(250)\n\t\t\t\tconsole.log(d)\n\t\t\t},\n\t\t\terror : function(x){\n\t\t\t\t$('.message',form).html('Something went wrong. Please refresh the page and try again.')\n\t\t\t\tloading.fadeOut(250)\n\t\t\t\tconsole.log(x)\n\t\t\t}\n\t\t})\n\t});\n\n} ( jQuery ) ); //end wrapper","( function ( $ ) { //begin wrapper\n\t\"use strict\";\n\t\n\t$(document).ready(function() {\n    \t$('select').material_select();\n\t  });\n  \n  } ( jQuery ) ); //end wrapper"]}